<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íƒ„í¬ì˜ ë‹¬ íƒí—˜ ëŒ€ëª¨í—˜!</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; padding: 0; }
    .animate-bounce { animation: bounce 1s infinite; }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    .shake { animation: shake 350ms cubic-bezier(.36,.07,.19,.97) both; }
    .wiggle { animation: wiggle 650ms ease-in-out both; }
    .spark { animation: spark 550ms ease-out both; }
    @keyframes bounce {
      0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
      50% { transform: none; animation-timing-function: cubic-bezier(0,0,0.2,1); }
    }
    @keyframes pulse {
      50% { opacity: .5; }
    }
    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }
    @keyframes wiggle {
      0% { transform: rotate(0deg) scale(1); }
      20% { transform: rotate(-3deg) scale(1.02); }
      40% { transform: rotate(3deg) scale(1.02); }
      60% { transform: rotate(-2deg) scale(1.01); }
      100% { transform: rotate(0deg) scale(1); }
    }
    @keyframes spark {
      0% { transform: scale(0.7); opacity: 0; }
      35% { transform: scale(1.15); opacity: 1; }
      100% { transform: scale(1); opacity: 0; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
    const pick = arr => arr[Math.floor(Math.random() * arr.length)];

    function beep(freq = 440, duration = 0.06, volume = 0.06) {
      try {
        const AudioCtx = window.AudioContext || window.webkitAudioContext;
        const ctx = new AudioCtx();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = freq;
        g.gain.value = volume;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        setTimeout(() => {
          o.stop();
          ctx.close();
        }, duration * 1000);
      } catch (_) {}
    }

    const MoonExplorer = () => {
      const [section, setSection] = useState('moon');
      const [quizScore, setQuizScore] = useState(0);
      const [qNum, setQNum] = useState(0);
      const [showAns, setShowAns] = useState(false);
      const [rocket, setRocket] = useState(null);
      const [mission, setMission] = useState(0);
      const [launchStage, setLaunchStage] = useState(0);
      const [flightStage, setFlightStage] = useState(0);
      const [artemisTab, setArtemisTab] = useState('rocket'); // rocket | launch | flight | nasa
      const [stars, setStars] = useState([]);
      const [modal, setModal] = useState(null);
      const [soundOn, setSoundOn] = useState(true);
      const [toast, setToast] = useState(null);
      const [favorites, setFavorites] = useState(() => new Set());
      const [pinned, setPinned] = useState(() => new Set());
      const [shakeScreen, setShakeScreen] = useState(false);
      const [badges, setBadges] = useState(() => new Set());

      useEffect(() => {
        setStars(Array.from({length:40},(_,i)=>({id:i,l:Math.random()*100,t:Math.random()*100,s:Math.random()*3+1,d:Math.random()*2})));
      }, []);

      const showToast = (text) => {
        setToast(text);
        setTimeout(() => setToast(null), 1100);
      };

      const sfx = (type) => {
        if (!soundOn) return;
        if (type === 'click') beep(520, 0.05);
        if (type === 'fav') beep(880, 0.06);
        if (type === 'pin') beep(330, 0.06);
        if (type === 'boom') { beep(120, 0.09, 0.08); setTimeout(()=>beep(240,0.08,0.06),70); }
        if (type === 'win') { beep(784, 0.06); setTimeout(()=>beep(988,0.06),90); }
      };

      const award = (id, emoji, label) => {
        setBadges(prev => {
          if (prev.has(id)) return prev;
          const n = new Set(prev);
          n.add(id);
          showToast(`${emoji} ìŠ¤í‹°ì»¤ GET!`);
          sfx('win');
          return n;
        });
        if (label) console.log('[badge]', id, label);
      };

      useEffect(() => {
        const onKeyDown = (e) => {
          if (e.key === 'Escape') setModal(null);
          // 1~4ë¡œ ì„¹ì…˜ ì í”„
          if (e.key === '1') setSection('moon');
          if (e.key === '2') setSection('history');
          if (e.key === '3') setSection('apollo');
          if (e.key === '4') setSection('artemis');
          // r: ëœë¤ ì¹´ë“œ ì—´ê¸°
          if (e.key.toLowerCase() === 'r') {
            const pool = section === 'moon' ? earthCards
              : section === 'history' ? historyCards
              : section === 'apollo' ? apolloCards
              : nasaLearnCards;
            const c = pick(pool);
            sfx('click');
            showToast('ğŸ² ëœë¤!');
            setModal(c);
          }
          // s: ì‚¬ìš´ë“œ í† ê¸€
          if (e.key.toLowerCase() === 's') {
            setSoundOn(v => !v);
            showToast('ğŸ”Š/ğŸ”‡');
          }
        };
        window.addEventListener('keydown', onKeyDown);
        return () => window.removeEventListener('keydown', onKeyDown);
      }, [section, soundOn, earthCards, historyCards, apolloCards, nasaLearnCards]);

      const earthCards = [
        {id:'birth',title:'ë‹¬ì˜ íƒ„ìƒ',emoji:'ğŸŒ™',color:'from-blue-900/50 to-blue-800/50',short:'íƒ„í¬ì•¼, 45ì–µ ë…„ ì „ ì¶©ëŒ ì´ì•¼ê¸°ì•¼!',
          detail:{desc:'íƒ„í¬ì•¼, ì•½ 45ì–µ ë…„ ì „ì— í™”ì„±ë§Œ í•œ í–‰ì„± "í…Œì´ì•„"ê°€ ì•„ê¸° ì§€êµ¬ë‘ ì¾… ë¶€ë”ªí˜”ë‹¨ë‹¤.\n\nê·¸ë•Œ íŠ€ì–´ë‚˜ì˜¨ ëŒ ì¡°ê°ë“¤ì´ ìš°ì£¼ì— ë‘¥ë‘¥ ë– ë‹¤ë‹ˆë‹¤ê°€ ì„œë¡œ ë¶™ì–´ì„œ ë‹¬ì´ ë˜ì—ˆì–´.\n\nì²˜ìŒì—” ë‹¬ì´ ì§€êµ¬ì™€ 22,500kmë°–ì— ì•ˆ ë–¨ì–´ì ¸ ìˆì—ˆëŠ”ë° ì§€ê¸ˆì€ 384,400kmë‚˜ ë©€ì–´ì¡Œì§€.\n\nì§€ê¸ˆë„ ë§¤ë…„ 3.8cmì”© ì‚´ê¸ˆì‚´ê¸ˆ ë©€ì–´ì§€ê³  ìˆë‹¤ëŠ” ê²Œ ì°¸ ì‹ ê¸°í•˜ì§€?',img:'https://photojournal.jpl.nasa.gov/jpeg/PIA12166.jpg',vid:'https://www.youtube.com/embed/UIKmSQqp8W'}},
        {id:'size',title:'í¬ê¸° ë¹„êµ',emoji:'ğŸ“',color:'from-purple-900/50 to-purple-800/50',short:'ë‹¬ì€ ì§€êµ¬ì˜ 4ë¶„ì˜ 1 í¬ê¸°ì•¼!',
          detail:{desc:'íƒ„í¬ì•¼, ë‹¬ì˜ ì§€ë¦„ì€ 3,474kmë¼ì„œ ì§€êµ¬(12,742km)ì˜ ë”± 4ë¶„ì˜ 1 ì •ë„ì•¼.\n\nê·¼ë° íƒœì–‘ì€ ë‹¬ë³´ë‹¤ 400ë°°ë‚˜ í¬ê³  400ë°° ë©€ë¦¬ ìˆì–´ì„œ í•˜ëŠ˜ì—ì„œ ë¹„ìŠ·í•˜ê²Œ ë³´ì¸ë‹¨ë‹¤.\n\nê·¸ë˜ì„œ íƒ„í¬ê°€ ì¢‹ì•„í•˜ëŠ” ë©‹ì§„ ê°œê¸°ì¼ì‹ì„ ë³¼ ìˆ˜ ìˆëŠ” ê±°ì§€!',img:'https://photojournal.jpl.nasa.gov/jpeg/PIA00405.jpg',vid:'https://www.youtube.com/embed/cxrLRbkOwKs'}},
        {id:'tide',title:'ë°€ë¬¼ê³¼ ì°ë¬¼',emoji:'ğŸŒŠ',color:'from-green-900/50 to-green-800/50',short:'íƒ„í¬ì•¼, ë‹¬ì´ ë°”ë‹¤ë¥¼ ë‹¹ê²¨!',
          detail:{desc:'íƒ„í¬ì•¼, ë‹¬ì˜ ì¤‘ë ¥ì´ ì§€êµ¬ ë°”ë‹·ë¬¼ì„ ì‚´ì§ ëŒì–´ë‹¹ê²¨ì„œ ë°€ë¬¼ê³¼ ì°ë¬¼ì´ ìƒê¸°ëŠ” ê±°ì•¼.\n\në‹¬ ìª½ ë°”ë‹¤ëŠ” ë¶ˆë£© ì˜¬ë¼ì˜¤ê³  ë°˜ëŒ€ìª½ë„ ì›ì‹¬ë ¥ ë•Œë¬¸ì— ë”°ë¼ ì˜¬ë¼ì˜¤ì§€.\n\nê·¸ë˜ì„œ í•˜ë£¨ì— ë‘ ë²ˆì”© ë¬¼ì´ ë“¤ê³  ë‚˜ê³ , ë³´ë¦„ë‹¬ì´ë‚˜ ì´ˆìŠ¹ë‹¬ ë•ŒëŠ” ì°¨ì´ê°€ ë” ì»¤ì§„ë‹¨ë‹¤!',img:'https://upload.wikimedia.org/wikipedia/commons/3/3b/Tidal_bulge.png',vid:'https://www.youtube.com/embed/tcGEjzt_4is'}},
        {id:'quake',title:'ë¬¸í€˜ì´í¬',emoji:'ğŸŒ‹',color:'from-orange-900/50 to-orange-800/50',short:'ë‹¬ì—ë„ í”ë“¤ë¦¼ì´ ìˆë‹¨ë‹¤!',
          detail:{desc:'íƒ„í¬ì•¼, ë‹¬ì—ë„ ì§€ì§„ì²˜ëŸ¼ í”ë“¤ë¦¼ì´ ìˆì–´ì„œ ë¬¸í€˜ì´í¬ë¼ê³  ë¶ˆëŸ¬.\n\nì•„í´ë¡œ ìš°ì£¼ë¹„í–‰ì‚¬ë“¤ì´ ì„¸ìš´ ì§€ì§„ê³„ê°€ ë¬´ë ¤ 28ë²ˆì´ë‚˜ ê°ì§€í–ˆëŒ€.\n\nì§€êµ¬ ì§€ì§„ì€ ê¸ˆë°© ëë‚˜ì§€ë§Œ ë‹¬ì€ ë¬¼ê³¼ ê³µê¸°ê°€ ì—†ì–´ì„œ ì§„ë™ì´ í•œ ì‹œê°„ì´ë‚˜ ì´ì–´ì§ˆ ë•Œë„ ìˆì–´!',img:'https://www.hq.nasa.gov/alsj/a11/AS11-40-5949HR.jpg',vid:'https://www.youtube.com/embed/s3bffub-9UM'}}
      ];

      const historyCards = [
        {id:'ancient',emoji:'ğŸ“œ',title:'ê³ ëŒ€ì˜ ë‹¬: ì‹œê°„ì€ ë‹¬ì´ ì•Œë ¤ì¤¬ì–´',color:'from-amber-900/50 to-yellow-900/50',short:'íƒ„í¬ì•¼, ë‹¬ì€ ì˜›ë‚  ì‚¬ëŒë“¤ì˜ ì‹œê³„ì˜€ëŒ€!',
          detail:{desc:'íƒ„í¬ì•¼, ì‹œê³„ê°€ ì—†ë˜ ì˜›ë‚  ì‚¬ëŒë“¤ì€ ë‹¬ì´ ì°¨ê³  ê¸°ìš°ëŠ” ê±¸ ë³´ë©´ì„œ ë‚ ì§œì™€ ê³„ì ˆì„ ì§ì‘í–ˆì–´.\n\nâ€œì´ë²ˆ ë‹¬ ë³´ë¦„ì€ ì–¸ì œì§€?â€ ê°™ì€ ê±¸ ë‹¬ë¡œ ë§ì·„ë˜ ê±°ì§€.\n\n(ê¸´ ì„¤ëª…ì€ ì•ˆ í• ê²Œ! ëŒ€ì‹  ê·¸ëƒ¥ â€œë‹¬ì´ ì‹œê°„í‘œâ€ì˜€ë‹¤ëŠ” ê²ƒë§Œ ê¸°ì–µí•˜ë©´ ë¼.)',img:'https://upload.wikimedia.org/wikipedia/commons/2/2d/Moon_phases_diagram.png'}},
        {id:'photo',emoji:'ğŸ“·',title:'1840ë…„: ë‹¬ ì‚¬ì§„ì´ ì²˜ìŒ ì°í˜”ì–´',color:'from-slate-900/50 to-gray-800/50',short:'íƒ„í¬ì•¼, ë‹¬ì„ â€œì°ì–´ì„œâ€ ë‚¨ê¸°ê¸° ì‹œì‘!',
          detail:{desc:'íƒ„í¬ì•¼, 1840ë…„ì— ì²˜ìŒìœ¼ë¡œ ë‹¬ ì‚¬ì§„ì´ ì°í˜”ì–´.\n\nê·¸ì „ì—” ì‚¬ëŒë“¤ì€ ë‹¬ì„ â€œê·¸ë ¤ì„œâ€ ê¸°ë¡í–ˆëŠ”ë°, ì´ì œëŠ” ì‚¬ì§„ìœ¼ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆê²Œ ëœ ê±°ì•¼.',img:'https://upload.wikimedia.org/wikipedia/commons/6/6a/John_W_Draper-The_first_Moon_Photograph_1840.jpg'}},
        {id:'telescope',emoji:'ğŸ”­',title:'ë§ì›ê²½: ë‹¬ì´ ìš¸í‰ë¶ˆí‰í•˜ë‹¤ëŠ” ê±¸ ë´¤ì–´',color:'from-purple-900/50 to-indigo-900/50',short:'íƒ„í¬ì•¼, ë‹¬ì€ ë§¤ëˆí•œ ê³µì´ ì•„ë‹ˆë˜!',
          detail:{desc:'íƒ„í¬ì•¼, ë§ì›ê²½ìœ¼ë¡œ ë‹¬ì„ ë³´ë©´ ê·¸ë¦¼ìì™€ í¬ë ˆì´í„°ê°€ ë³´ì—¬.\n\nì‚¬ëŒë“¤ì€ â€œë‹¬ì€ ì™„ë²½í•œ êµ¬ìŠ¬â€ì´ë¼ê³  ìƒê°í–ˆëŠ”ë°, ì‹¤ì œë¡œëŠ” ìš¸í‰ë¶ˆí‰í•œ í‘œë©´ì´ë¼ëŠ” ê±¸ ì•Œê²Œ ëì§€.',img:'https://upload.wikimedia.org/wikipedia/commons/6/6b/Galileo_moon_phases.jpg'}},
        {id:'luna9',emoji:'ğŸ›°ï¸',title:'1966ë…„: ë‹¬ì— ì²˜ìŒ â€œë¶€ë“œëŸ½ê²Œâ€ ì°©ë¥™!',color:'from-blue-900/50 to-cyan-900/50',short:'íƒ„í¬ì•¼, ë‹¬ í‘œë©´ì—ì„œ ì‚¬ì§„ì´ ë‚ ì•„ì™”ëŒ€!',
          detail:{desc:'íƒ„í¬ì•¼, 1966ë…„ì— ë£¨ë‚˜ 9ê°€ ë‹¬ì— â€œì¶©ëŒâ€ì´ ì•„ë‹ˆë¼ â€œì°©ë¥™â€ì„ ì„±ê³µí–ˆì–´.\n\nê·¸ë¦¬ê³  ë‹¬ í‘œë©´ ì‚¬ì§„ì„ ë³´ë‚´ì¤¬ì§€. ì‚¬ëŒë“¤ì€ â€œì§„ì§œ ë‹¬ ë°”ë‹¥â€ì„ ì²˜ìŒ ë³¸ ê±°ì•¼.',img:'https://upload.wikimedia.org/wikipedia/commons/7/70/Luna_9_first_images_from_surface_of_moon.jpg',vid:'https://www.youtube.com/embed/LxjYvnZ1Z0s'}},
        {id:'modern',emoji:'ğŸŒ™',title:'ìš”ì¦˜: ë‹¬ì€ â€˜ë‹¤ìŒ ëª¨í—˜ì˜ ì¶œë°œì â€™',color:'from-emerald-900/50 to-green-900/50',short:'íƒ„í¬ì•¼, ì´ì œ ë‹¬ì€ ëì´ ì•„ë‹ˆë¼ ì‹œì‘ì´ì•¼!',
          detail:{desc:'íƒ„í¬ì•¼, ì˜ˆì „ì—” â€œë‹¬ì— í•œ ë²ˆ ê°€ëŠ” ê²ƒâ€ì´ ê¿ˆì´ì—ˆëŠ”ë°,\nì´ì œëŠ” ë‹¬ì— ìì£¼ ê°€ë©´ì„œ ì˜¤ë˜ ë¨¸ë¬´ëŠ” ì‹œëŒ€ë¥¼ ì¤€ë¹„í•˜ê³  ìˆì–´.\n\nê·¸ë˜ì„œ ì•„ë¥´í…Œë¯¸ìŠ¤ê°€ ë‹¤ì‹œ ë‹¬ë¡œ ê°€ëŠ” ê±°ì•¼!',img:'https://upload.wikimedia.org/wikipedia/commons/5/55/Artemis_I_Launch_-_SLS_liftoff.jpg'}}
      ];

      const apolloCards = [
        {id:'a11',title:'ì•„í´ë¡œ 11í˜¸',emoji:'ğŸŒ™',color:'from-orange-900/50 to-red-900/50',short:'íƒ„í¬ì•¼, ì¸ë¥˜ê°€ ì²˜ìŒ ë‹¬ì— ë‹¿ì€ ìˆœê°„ì´ì•¼!',
          detail:{desc:'íƒ„í¬ì•¼, 1969ë…„ 7ì›” 20ì¼ ë‹ ì•”ìŠ¤íŠ¸ë¡±ì´ ë‹¬ì— ì²« ë°œì„ ë””ë ë‹¨ë‹¤.\n\nê·¸ë•Œ ë‚¨ê¸´ ë§ ê¸°ì–µí•˜ì§€? "ì´ê²ƒì€ í•œ ì‚¬ëŒì—ê²ŒëŠ” ì‘ì€ í•œ ê±¸ìŒì´ì§€ë§Œ, ì¸ë¥˜ì—ê²ŒëŠ” ìœ„ëŒ€í•œ ë„ì•½ì…ë‹ˆë‹¤."\n\nì•”ìŠ¤íŠ¸ë¡±ê³¼ ì˜¬ë“œë¦°ì´ 2ì‹œê°„ 31ë¶„ ë™ì•ˆ ê±¸ìœ¼ë©° ê¹ƒë°œì„ ê½‚ê³  ë‹¬ ëŒ 21.5kgì„ ì±™ê²¼ì–´.\n\nì „ ì„¸ê³„ 6ì–µ ëª…ì´ ê·¸ ì¥ë©´ì„ ìˆ¨ì£½ì´ë©° ë´¤ëŒ€.',img:'https://upload.wikimedia.org/wikipedia/commons/a/a3/Buzz_Aldrin_and_the_US_flag_on_the_Moon%2C_AS11-40-5875.jpg',vid:'https://www.youtube.com/embed/RMINSD7MmT4'}},
        {id:'a13',title:'ì•„í´ë¡œ 13í˜¸',emoji:'ğŸ†˜',color:'from-red-900/50 to-rose-900/50',short:'ìœ„ê¸°ì˜€ì§€ë§Œ ëª¨ë‘ ì‚´ì•„ ëŒì•„ì™”ì–´!',
          detail:{desc:'íƒ„í¬ì•¼, 1970ë…„ 4ì›” ì•„í´ë¡œ 13í˜¸ì—ì„œ "íœ´ìŠ¤í„´, ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤"ë¼ëŠ” ë§ì´ ë‚˜ì™”ì–´.\n\nì‚°ì†Œ íƒ±í¬ê°€ í­ë°œí•´ì„œ ì „ê¸°ì™€ ê³µê¸°ê°€ ë¶€ì¡±í–ˆëŠ”ë° ê³¼í•™ìë“¤ê³¼ ìš°ì£¼ë¹„í–‰ì‚¬ë“¤ì´ ë¨¸ë¦¬ë¥¼ ë§ëŒ€ê³  í•´ê²°í–ˆì§€.\n\nê²°êµ­ ì„¸ ëª… ëª¨ë‘ ë¬´ì‚¬íˆ ì§€êµ¬ì— ê·€í™˜í–ˆë‹¨ë‹¤.',img:'https://upload.wikimedia.org/wikipedia/commons/9/9c/Apollo_13_Lunar_Module_Aquarius.jpg',vid:'https://www.youtube.com/embed/WXXuppdewV8'}},
        {id:'stats',title:'ì•„í´ë¡œ ê¸°ë¡',emoji:'ğŸ“Š',color:'from-blue-900/50 to-indigo-900/50',short:'ì•„í´ë¡œ ê¸°ë¡ì„ ê°™ì´ ì„¸ì–´ë³´ì!',
          detail:{desc:'íƒ„í¬ì•¼, ì•„í´ë¡œ í”„ë¡œê·¸ë¨ì€ ì´ 17ë²ˆì´ë‚˜ ì§„í–‰ëê³  ê·¸ì¤‘ 6ë²ˆì´ ë‹¬ ì°©ë¥™ì— ì„±ê³µí–ˆì–´.\n\n12ëª…ì˜ ìš°ì£¼ì¸ì´ ë‹¬ì„ ê±¸ì—ˆê³  382kgì˜ ë‹¬ ì•”ì„ì„ ëª¨ì•˜ì§€.\n\në‹¬ í‘œë©´ í™œë™ë§Œ 80ì‹œê°„ì´ ë„˜ì—ˆê³  ì•„í´ë¡œ 15~17í˜¸ëŠ” ì›”ë©´ì°¨ë„ê¹Œì§€ íƒ”ë‹¨ë‹¤.\n\në§ˆì§€ë§‰ì€ 1972ë…„ ì•„í´ë¡œ 17í˜¸ì˜€ê³ , ì´ì œ 50ë…„ ë§Œì— ì•„ë¥´í…Œë¯¸ìŠ¤ê°€ ë‹¤ì‹œ ê°€ëŠ” ê±°ì•¼!',img:'https://images-assets.nasa.gov/image/AS17-134-20384/AS17-134-20384~orig.jpg',vid:'https://www.youtube.com/embed/0lZ8iDAmX9o'}},
        {id:'legacy',title:'ì•„í´ë¡œì˜ ìœ ì‚°',emoji:'ğŸ',color:'from-purple-900/50 to-pink-900/50',short:'ì•„í´ë¡œ ê¸°ìˆ ì´ ì§€ê¸ˆë„ ê³ì— ìˆì–´!',
          detail:{desc:'íƒ„í¬ì•¼, ì•„í´ë¡œ ë•ë¶„ì— ì»´í“¨í„°ê°€ ì‘ì•„ì ¸ì„œ ì§€ê¸ˆ ìš°ë¦¬ê°€ ìŠ¤ë§ˆíŠ¸í°ì„ ì“°ëŠ” ê±°ì•¼.\n\ní…Œí”„ë¡  í”„ë¼ì´íŒ¬, ìš´ë™í™” ì¿ ì…˜, CAT ìŠ¤ìº”, ì •ìˆ˜ í•„í„° ê°™ì€ ê²ƒë“¤ë„ ë‹¤ ì˜í–¥ì„ ë°›ì•˜ë‹¨ë‹¤.\n\nê·¸ë•Œ 1ë‹¬ëŸ¬ë¥¼ íˆ¬ìí•˜ë©´ 7~14ë‹¬ëŸ¬ ê°€ì¹˜ê°€ ëŒì•„ì™”ë‹¤ë‹ˆ ì •ë§ ëŒ€ë‹¨í•˜ì§€?',img:'https://upload.wikimedia.org/wikipedia/commons/3/3d/Wide_angle_view_of_Mission_Control_Center_during_Apollo_14_transmission_%28S71-17122%29.jpg',vid:'https://www.youtube.com/embed/vl6jn-DdafM'}}
      ];

      const rockets = [
        {id:'las',name:'íƒˆì¶œ ì‹œìŠ¤í…œ',color:'#FFF',top:'0%',h:'8%',desc:'íƒ„í¬ì•¼, ë¹„ìƒ ìƒí™©ì´ë©´ ì´ íƒˆì¶œ ì‹œìŠ¤í…œì´ ìš°ì£¼ì¸ì„ ìˆœì‹ê°„ì— ì•ˆì „í•˜ê²Œ ë¹¼ë‚¸ë‹¨ë‹¤!'},
        {id:'orion',name:'ì˜¤ë¦¬ì˜¨',color:'#F5F5F5',top:'8%',h:'12%',desc:'ì˜¤ë¦¬ì˜¨ ìº¡ìŠì—ëŠ” ìš°ì£¼ì¸ 4ëª…ì´ í¸í•˜ê²Œ íƒ€ê³  íƒ„í¬ì—ê²Œ ì¸ì‚¬í•  ê±°ì•¼.'},
        {id:'icps',name:'2ë‹¨ ë¡œì¼“',color:'#F97316',top:'20%',h:'15%',desc:'ì´ 2ë‹¨ ë¡œì¼“ì´ ìš°ì£¼ì„ ì„ ë‹¤ì‹œ í˜ê» ë°€ì–´ì„œ ë‹¬ ìª½ìœ¼ë¡œ ê¶¤ë„ë¥¼ ë°”ê¿” ì¤˜.'},
        {id:'core',name:'ì—°ë£Œíƒ±í¬',color:'#EA580C',top:'35%',h:'40%',desc:'ì—¬ê¸° ê±°ëŒ€í•œ ì—°ë£Œíƒ±í¬ì— 73ë§Œ ê°¤ëŸ°ì˜ ì—°ë£Œê°€ ë“¤ì–´ê°€ì„œ ì—„ì²­ë‚œ í˜ì„ ë§Œë“ ë‹¨ë‹¤.'},
        {id:'boost',name:'ë¶€ìŠ¤í„°',color:'#E5E5E5',top:'50%',h:'25%',desc:'ë‘ ê°œì˜ ë¶€ìŠ¤í„°ê°€ ì „ì²´ ì¶”ë ¥ì˜ 75%ë¥¼ ë‹´ë‹¹í•˜ë‹ˆ ì •ë§ ë“ ë“ í•˜ì§€, íƒ„í¬ì•¼?'},
        {id:'eng',name:'RS-25',color:'#374151',top:'75%',h:'8%',desc:'RS-25 ì—”ì§„ 4ê°œê°€ ëª¨ì—¬ì„œ ì…”í‹€ ë•Œë¶€í„° ìŒ“ì€ ê²½í—˜ì„ ê·¸ëŒ€ë¡œ ë³´ì—¬ì¤˜.'}
      ];

      const rocketInfos = {
        las:{
          structure:'ë¡œì¼“ ë§¨ ê¼­ëŒ€ê¸°ì— ë¶™ì–´ ìˆëŠ” ë¾°ì¡±í•œ ë¶€ë¶„ì´ì•¼. ë§Œì•½ ë¬¸ì œê°€ ìƒê¸°ë©´ ì ê¹ ì‚¬ì´ì—ë„ ìš°ì£¼ì¸ì„ í†µì§¸ë¡œ ë¶„ë¦¬í•´ì„œ ë‚™í•˜ì‚°ìœ¼ë¡œ ë‚´ë ¤ë³´ë‚¼ ìˆ˜ ìˆì–´.',
          lego:'ë ˆê³  ë§Œë“¤ ë• ì œì¼ ë§ˆì§€ë§‰ì— ì‘ì€ ì›ë¿”ì„ ì–¹ìœ¼ë©´ì„œ â€œì•ˆì „ ëª¨ìâ€ë¼ê³  ìƒê°í•˜ë©´ ê¸°ì–µí•˜ê¸° ë” ì‰½ë‹¨ë‹¤.'
        },
        orion:{
          structure:'ì˜¤ë¦¬ì˜¨ì€ ìš°ì£¼ì¸ë“¤ì´ ìƒí™œí•˜ê³  ì ë„ ìëŠ” ì§„ì§œ ì§‘ì´ì•¼. ì¡°ì¢…ì„, ì»´í“¨í„°, ì¬ì§„ì…ìš© ë°©ì—´íŒê¹Œì§€ ì½¤íŒ©íŠ¸í•˜ê²Œ ë“¤ì–´ê°€ ìˆì–´.',
          lego:'ìº¡ìŠ ì°½ë¬¸ì„ ìŠ¤í‹°ì»¤ë‚˜ íˆ¬ëª… ë¸Œë¦­ìœ¼ë¡œ ê¾¸ë¯¸ë©´ ì§„ì§œ ìš°ì£¼ì„  ëŠë‚Œì´ ë‚˜ë‹ˆê¹Œ ê¼­ ë„£ì–´ë³´ì!'
        },
        icps:{
          structure:'Interim Cryogenic Propulsion Stageë¼ëŠ” ê¸´ ì´ë¦„ì„ ê°€ì§„ 2ë‹¨ ì¶”ì§„ì²´ì•¼. ì•¡ì²´ ìˆ˜ì†Œì™€ ì‚°ì†Œë¥¼ ì¨ì„œ ë‹¬ë¡œ í–¥í•˜ëŠ” ë§ˆì§€ë§‰ í° ì¶”ì§„ì„ í•´ ì¤˜.',
          lego:'ì£¼í™©ìƒ‰ê³¼ í°ìƒ‰ì„ ë²ˆê°ˆì•„ ìŒ“ì•„ì„œ ì—°ë£Œ íƒ±í¬ì™€ ì—”ì§„ ë¶€ë¶„ì„ êµ¬ë¶„í•´ ì£¼ë©´ í›¨ì”¬ ë©‹ì ¸.'
        },
        core:{
          structure:'ì£¼í™©ìƒ‰ì˜ ë‘êº¼ìš´ ëª¸í†µì´ ë°”ë¡œ ì½”ì–´ ìŠ¤í…Œì´ì§€ì•¼. ì—¬ê¸°ì— ì—°ë£Œë¥¼ ì±„ìš°ê³  RS-25 ì—”ì§„ 4ê°œë¥¼ ë‹¬ì•„ ë‘”ë‹¨ë‹¤.',
          lego:'ë‘¥ê·¼ ì‹¤ë¦°ë” ëª¨ì–‘ì„ ë§Œë“¤ê¸° ì–´ë µë‹¤ë©´ 1Ã—2 ë¸Œë¦­ì„ ëŒì•„ê°€ë©´ì„œ ë¶™ì—¬ì„œ ì›í†µ ëŠë‚Œì„ ë‚´ ë³´ì.'
        },
        boost:{
          structure:'ì–‘ì˜†ì— ë¶™ì€ í°ìƒ‰ ë¶€ìŠ¤í„° ë‘ ê°œê°€ ì „ì²´ ì¶”ë ¥ì˜ ëŒ€ë¶€ë¶„ì„ ë§Œë“¤ì–´. 2ë¶„ ì •ë„ íƒ€ê³  ë‚˜ë©´ ë°”ë‹¤ë¡œ ë–¨ì–´ì ¸ì„œ íšŒìˆ˜í•˜ì§€.',
          lego:'ë¶€ìŠ¤í„°ì—ëŠ” ê²€ì€ ì¤„ ë¬¸ì–‘ì´ ë§ì€ë°, ê²€ì€ íƒ€ì¼ì´ë‚˜ ìŠ¤í‹°ì»¤ë¡œ í¬ì¸íŠ¸ë¥¼ ì£¼ë©´ ì§„ì§œ ê°™ì•„ì ¸!'
        },
        eng:{
          structure:'RS-25 ì—”ì§„ì€ ì›ë˜ ìš°ì£¼ì™•ë³µì„ ì—ì„œ ì“°ë˜ ì¹œêµ¬ë“¤ì´ì•¼. ì¬ì‚¬ìš© ê²½í—˜ ë•ë¶„ì— ì´ë²ˆì—ë„ ë§¤ìš° ë¯¿ìŒì§í•˜ì§€.',
          lego:'íˆ¬ëª… ì˜¤ë Œì§€ ë¸Œë¦­ì„ ë‹¬ì•„ì„œ í™”ì—¼ì´ ë‚˜ì˜¤ëŠ” ê²ƒì²˜ëŸ¼ ê¾¸ë¯¸ë©´ ì‚¬ì§„ ì°ì„ ë•Œë„ ë©‹ì§€ë‹¨ë‹¤.'
        }
      };

      const missions = [
        {title:'ë°œì‚¬!',desc:'ì¼€ë„¤ë”” ìš°ì£¼ì„¼í„°ì—ì„œ ì¹´ìš´íŠ¸ë‹¤ìš´ì„ ì™¸ì¹˜ë©° í•˜ëŠ˜ë¡œ ì˜ì•„ ì˜¬ë¦¬ì!',emoji:'ğŸ”¥'},
        {title:'ì§€êµ¬ ê¶¤ë„',desc:'ê¶¤ë„ë¥¼ ëŒë©´ì„œ ëª¨ë“  ì‹œìŠ¤í…œì„ ê¼¼ê¼¼íˆ í™•ì¸í•´, íƒ„í¬ì•¼!',emoji:'ğŸŒ'},
        {title:'ë‹¬ë¡œ!',desc:'4ì¼ ë™ì•ˆ ë‹¬ê¹Œì§€ ì—¬í–‰í•˜ë©° ì°½ë°–ìœ¼ë¡œ ìš°ì£¼ í’ê²½ì„ ë³´ì—¬ì¤„ê²Œ.',emoji:'âœ¨'},
        {title:'ë‹¬ ë’·ë©´',desc:'45ë§Œkmë¥¼ ì§€ë‚˜ ë‹¬ ë’·ë©´ê¹Œì§€ ëŒì•„ë³´ëŠ” íŠ¹ë³„í•œ ìˆœê°„ì´ì§€.',emoji:'ğŸŒ™'},
        {title:'ê·€í™˜',desc:'íƒœí‰ì–‘ì— ì°©ìˆ˜í•˜ë©´ì„œ "íƒ„í¬ì•¼, ì§‘ì— ê°„ë‹¤!"ë¼ê³  ì™¸ì¹  ê±°ì•¼.',emoji:'ğŸª‚'}
      ];

      const launchTimeline = [
        {title:'T-10ë¶„, ì¹´ìš´íŠ¸ë‹¤ìš´',icon:'â±ï¸',desc:'ëª¨ë“  ë°¸ë¸Œì™€ ì»´í“¨í„°ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì ê²€í•˜ê³  ì—°ë£Œ ì˜¨ë„ë¥¼ ë§ì¶°. ê´€ì œì‹¤ì—ì„œëŠ” "Go!" ì‚¬ì¸ì´ ìŸì•„ì§€ì§€.',lego:'ë ˆê³  ë†€ì´í•  ë• ì´ ìˆœê°„ì„ ìœ„í•´ ë¯¸ë‹ˆí”¼ê²¨ë“¤ì„ ì½˜ì†” ìë¦¬ì— ì•‰í˜€ ë‘ë©´ ë” ì‹¤ê°ë‚˜!'},
        {title:'ì í™”! ë¶€ìŠ¤í„° ì ë“±',icon:'ğŸ”¥',desc:'RS-25 ì—”ì§„ê³¼ ê³ ì²´ ë¶€ìŠ¤í„°ê°€ ë™ì‹œì— ë¶ˆì„ ë¿œìœ¼ë©´ì„œ ë¡œì¼“ì´ ì„œì„œíˆ ë“¤ì©ì´ì§€.',lego:'ë¶ˆê½ƒ ë¸Œë¦­ì„ ê¸¸ê²Œ ë¶™ì—¬ì„œ â€œí™”ë¥´ë¥´â€ íƒ€ëŠ” ëŠë‚Œì„ ë§Œë“¤ì–´ ë³´ì.'},
        {title:'ìµœëŒ€ ë™ì•• í†µê³¼',icon:'ğŸ’¨',desc:'ëŒ€ê¸° ì €í•­ì´ ê°€ì¥ í° êµ¬ê°„ì„ ì§€ë‚˜ë©° ì¡°ì¢…ì‚¬ê°€ ì¥ë¹„ë¥¼ ì§€ì¼œë´. ì—¬ê¸°ë§Œ ì§€ë‚˜ë©´ í›¨ì”¬ ì•ˆì •ë¼.',lego:'ë¡œì¼“ ì£¼ìœ„ë¥¼ íˆ¬ëª… ë¸Œë¦­ìœ¼ë¡œ ë‘˜ëŸ¬ì„œ ê³µê¸°ê°€ íë¥´ëŠ” ê²ƒì²˜ëŸ¼ ì—°ì¶œí•´ë„ ì¢‹ì•„.'},
        {title:'ë¶€ìŠ¤í„° ë¶„ë¦¬',icon:'âœ‚ï¸',desc:'ì—°ë£Œë¥¼ ë‹¤ ì“´ ì˜† ë¶€ìŠ¤í„°ë¥¼ ë–¼ì–´ë‚´ê³  ì½”ì–´ ìŠ¤í…Œì´ì§€ë§Œ ê³„ì† ì˜¬ë¼ê°€.',lego:'ìì„ì´ë‚˜ í•€ì„ ì¨ì„œ â€œë”¸ê¹â€ ë¶„ë¦¬ë˜ëŠ” êµ¬ì¡°ë¡œ ë§Œë“¤ë©´ íƒ„í¬ê°€ ì§ì ‘ ì¬í˜„í•  ìˆ˜ ìˆì–´!'},
        {title:'2ë‹¨ ì í™”',icon:'ğŸŒ ',desc:'ICPSê°€ ë¶ˆì„ ë¶™ì—¬ ë‹¬ ê¶¤ë„ë¡œ í–¥í•˜ëŠ” ê±°ëŒ€í•œ ì¶”ì§„ì„ ë§Œë“¤ì–´. ì´ê²Œ ë°”ë¡œ TLI(ë‹¬ ì „ì´ ê¶¤ë„)ì•¼.',lego:'ì£¼í™©ìƒ‰ ëª¸í†µ ë’¤ì— ì‘ì€ ì—”ì§„ ë¸Œë¦­ì„ ë¶™ì—¬ ë‹¤ë¥¸ ë¶ˆê½ƒ ìƒ‰ì„ ì¨ ë´.'},
        {title:'ì˜¤ë¦¬ì˜¨ ë¶„ë¦¬ & í•­í•´',icon:'ğŸ›°ï¸',desc:'ì˜¤ë¦¬ì˜¨ì´ ë¡œì¼“ì—ì„œ ë–¨ì–´ì ¸ ë‚˜ì™€ íƒœì–‘ ì „ì§€íŒì„ í¼ì¹˜ê³  4ì¼ê°„ì˜ ì—¬í–‰ì„ ì‹œì‘í•´.',lego:'ë‚ ê°œë¥¼ ì ‘ì—ˆë‹¤ í¼ ìˆ˜ ìˆê²Œ íŒì§€ë¥¼ ì“°ë©´ ì§„ì§œì²˜ëŸ¼ ë³´ì¸ë‹¨ë‹¤.'}
      ];

      const flightStories = [
        {title:'ì§€êµ¬ë¥¼ ì‘ë³„í•˜ë©°',desc:'íƒ„í¬ì•¼, ì°½ë¬¸ ë°–ìœ¼ë¡œ ì§€êµ¬ê°€ ì‘ì•„ì§€ëŠ” ê±¸ ë³´ë©´ ë§ˆìŒì´ ë‘ê·¼ë‘ê·¼í•´. íŒŒë€ êµ¬ë¦„ë“¤ì´ ê³µì²˜ëŸ¼ ë³´ì¸ë‹¨ë‹¤.',tip:'ë ˆê³  ì˜¤ë¦¬ì˜¨ ì˜†ì— ì‘ì€ íŒŒë€ êµ¬ìŠ¬ì„ ë‘ë©´ ì§€êµ¬ ëª¨í˜• ì—­í• ì„ í•  ìˆ˜ ìˆì–´.'},
        {title:'ë‹¬ë¡œ í–¥í•˜ëŠ” ê¸¸',desc:'ìš°ì£¼ì„ ì€ í•˜ë£¨ì— í•œ ë²ˆì”© ì—”ì§„ì„ ì‚´ì§ ì¼œì„œ ì½”ìŠ¤ë¥¼ ì¡°ì •í•´. ê·¸ë•Œë§ˆë‹¤ ìŠ¹ë¬´ì›ë“¤ì€ ì„œë¡œ â€œíƒ„í¬ë„ ë“£ê³  ìˆì§€?â€ë¼ê³  ë†ë‹´ì„ ë‚˜ëˆ .',tip:'ê¸´ íˆ¬ëª… ì§€ì§€ëŒ€ë¥¼ í™œìš©í•´ ìš°ì£¼ì„ ì´ ê³µì¤‘ì— ë–  ìˆëŠ” ê²ƒì²˜ëŸ¼ ì „ì‹œí•´ ë³´ì.'},
        {title:'ë‹¬ ë’¤ ì»¤ë¸Œ ëŒê¸°',desc:'ë‹¬ ë’¤ë¥¼ ëŒì•„ ë‚˜ê°€ë©´ í†µì‹ ì´ ì ê¹ ëŠê¸°ëŠ”ë°, ìš°ì£¼ì¸ë“¤ì€ ì°½ë°–ìœ¼ë¡œ í¬ë ˆì´í„°ë¥¼ ìì„¸íˆ ê´€ì°°í•´.',tip:'íšŒìƒ‰ íƒ€ì¼ì´ë‚˜ ë‘¥ê·¼ ë¸Œë¦­ìœ¼ë¡œ ë‹¬ í‘œë©´ ë””ì˜¤ë¼ë§ˆë¥¼ ë§Œë“¤ì–´ë³´ë©´ ì–´ë•Œ?'},
        {title:'ê·€í™˜ ì¤€ë¹„',desc:'ì§€êµ¬ ëŒ€ê¸°ì— ì¬ëŒì…í•˜ê¸° ì „ì— ìº¡ìŠì„ íšŒì „ì‹œí‚¤ê³  ë°©ì—´íŒì„ ì²´í¬í•´. ëª¨ë‘ê°€ ë¬´ì‚¬íˆ íƒœí‰ì–‘ì— ì°©ìˆ˜í•˜ê¸¸ ë°”ë¼ë©´ì„œ ë§ì´ì•¼.',tip:'íˆ¬ëª… íŒŒë€ ë¸Œë¦­ìœ¼ë¡œ ë¬¼ê²°ì„ ë§Œë“¤ì–´ ìº¡ìŠì„ ë„ì›Œ ë³´ì.'}
      ];

      const artemisNameStory = {
        title:'ì™œ â€œì•„ë¥´í…Œë¯¸ìŠ¤â€ì¼ê¹Œ?',
        desc:'ì•„í´ë¡œ í”„ë¡œê·¸ë¨ì€ íƒœì–‘ì˜ ì‹  ì´ë¦„ì„ ì¼ì§€. ê·¸ ì•„í´ë¡œì—ê²ŒëŠ” ë‹¬ì˜ ì—¬ì‹ ì¸ ìŒë‘¥ì´ ìë§¤ ì•„ë¥´í…Œë¯¸ìŠ¤ê°€ ìˆì—ˆì–´. NASAëŠ” ìƒˆë¡œìš´ ë‹¬ íƒì‚¬ì— ì—¬ì‹ ì˜ ì´ë¦„ì„ ë¶™ì—¬ â€œì´ì œëŠ” ì—¬ë™ìƒ ì°¨ë¡€â€ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ì „í•˜ê³  ìˆì–´.'
      };

      const artemisVehicles = [
        {id:'sls',name:'SLS ë¡œì¼“',img:'https://upload.wikimedia.org/wikipedia/commons/1/1f/NASA%E2%80%99s_Evolved_SLS_Block_1B_Crew_Rocket_-_Night_Launch_%28B1B_Crew_Night_Launch%29.jpg',desc:'ì•„ë¥´í…Œë¯¸ìŠ¤ì˜ ì¶œë°œì ! SLSëŠ” NASAê°€ ë§Œë“  ê°€ì¥ ê°•ë ¥í•œ ë¡œì¼“ìœ¼ë¡œ, ë‹¤ë‹¨ ì½”ì–´ì™€ ê³ ì²´ ë¶€ìŠ¤í„°ë¥¼ ì´ìš©í•´ ì˜¤ë¦¬ì˜¨ì„ ìš°ì£¼ë¡œ ìœë‹¨ë‹¤.',link:'https://www.nasa.gov/reference/space-launch-system/'},
        {id:'orion',name:'ì˜¤ë¦¬ì˜¨ ìš°ì£¼ì„ ',img:'https://www.nasa.gov/wp-content/uploads/2023/03/ksc-20221117-ph-rls01-0038orig.jpeg',desc:'ìš°ì£¼ë¹„í–‰ì‚¬ ë„¤ ëª…ì´ ì•ˆì „í•˜ê²Œ íƒ‘ìŠ¹í•  ìº¡ìŠì´ì•¼. ê¸¸ê²ŒëŠ” ë‹¬ê¹Œì§€ ê°”ë‹¤ê°€ ì§€êµ¬ ëŒ€ê¸°ê¶Œ ì¬ì§„ì…ë„ ì±…ì„ì ¸.',link:'https://www.nasa.gov/humans-in-space/orion-spacecraft/'},
        {id:'gateway',name:'ê²Œì´íŠ¸ì›¨ì´',img:'https://upload.wikimedia.org/wikipedia/commons/5/5d/Gateway_and_Orion_in_lunar_orbit_%281%29.jpg',desc:'ë‹¬ ì£¼ìœ„ë¥¼ ëŒë©° ìš°ì£¼ ì •ë¥˜ì¥ ì—­í• ì„ í•˜ëŠ” ì‘ì€ ê±°ì ì´ì•¼. ì—¬ê¸°ì„œ ìš°ì£¼ë¹„í–‰ì‚¬ë“¤ì´ ì‰¬ê³  ì—°êµ¬í•˜ê³  ì°©ë¥™ì„ ì„ ê°ˆì•„íƒ€.',link:'https://www.nasa.gov/mission/gateway/'},
        {id:'hls',name:'ì¸ê°„ ì°©ë¥™ ì‹œìŠ¤í…œ',img:'https://upload.wikimedia.org/wikipedia/commons/0/0a/Human_Landing_System_Stand_In.jpg',desc:'ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë‹¬ í‘œë©´ê¹Œì§€ ì™•ë³µí•  ì°©ë¥™ì„ ì´ì•¼. ì•„ë¥´í…Œë¯¸ìŠ¤ 3ì—ì„œëŠ” ë‹¬ ë‚¨ê·¹ê¹Œì§€ íƒœì›Œ ì¤„ ê±°ì•¼.',link:'https://www.nasa.gov/directorates/esdmd/artemis-campaign-development-division/human-landing-system-program/'}
      ];

      const artemisSchedule = [
        {title:'ì•„ë¥´í…Œë¯¸ìŠ¤ I',detail:'2022ë…„ 11ì›” 16ì¼, SLSì™€ ì˜¤ë¦¬ì˜¨ì„ ë¬´ì¸ìœ¼ë¡œ ì‹œí—˜ ë°œì‚¬í•´ ì§€êµ¬-ë‹¬ ì™•ë³µì„ ì™„ë£Œí–ˆì–´.'},
        {title:'ì•„ë¥´í…Œë¯¸ìŠ¤ II',detail:'ì²« ìœ ì¸ ì‹œí—˜ ë¹„í–‰! ìš°ì£¼ë¹„í–‰ì‚¬ ë„¤ ëª…ì´ ë‹¬ì„ í•œ ë°”í€´ ëŒì•„ ì§€êµ¬ë¡œ ë³µê·€í•  ê³„íšì´ì•¼.'},
        {title:'ì•„ë¥´í…Œë¯¸ìŠ¤ III',detail:'ìš°ì£¼ë¹„í–‰ì‚¬ë¥¼ ë‹¬ ë‚¨ê·¹ì— ì°©ë¥™ì‹œì¼œ ë¬¼ ì–¼ìŒì„ ì°¾ê³  ì¥ê¸° ì²´ë¥˜ ê¸°ìˆ ì„ ì‹œí—˜í•  ê±°ì•¼.'}
      ];

      const lunarPlans = [
        'ë‹¬ ë‚¨ê·¹ì—ì„œ ë¬¼ê³¼ ì–¼ìŒì„ ì°¾ì•„ í™œìš©ë²•ì„ ì—°êµ¬í•´.',
        'ë‹¬ í‘œë©´ì—ì„œ ì§€êµ¬ì™€ ë‹¤ë¥¸ ì¤‘ë ¥, ì˜¨ë„ì—ì„œ ì–´ë–»ê²Œ ì¼í•˜ê³  ì‚´ ìˆ˜ ìˆëŠ”ì§€ ê²½í—˜ì„ ìŒ“ì•„.',
        'ë‹¬ì„ â€œí™”ì„± ê°€ê¸° ì „ ì‹œí—˜ì¥â€ìœ¼ë¡œ ì‚¼ì•„ ì¥ë¹„ì™€ ìƒí™œ ê¸°ìˆ ì„ ê²€ì¦í•´.'
      ];

      const artemisImpact = [
        'ìƒˆ ê¸°ìˆ ì„ ê°œë°œí•˜ë©´ì„œ ì§€êµ¬ì—ì„œ ì“°ì´ëŠ” ì œí’ˆê³¼ ì¼ìë¦¬ë¥¼ ë§Œë“¤ì–´.',
        'êµ­ì œ íŒŒíŠ¸ë„ˆì™€ í˜ì„ í•©ì³ ISSì²˜ëŸ¼ í˜‘ë ¥ ëª¨ë¸ì„ í™•ì¥í•´.',
        'ë‹¬ê³¼ ì§€êµ¬, íƒœì–‘ì— ëŒ€í•œ ìƒˆë¡œìš´ ê³¼í•™ ë°ì´í„°ë¥¼ ëª¨ì•„ ì¸ë¥˜ ì§€ì‹ì„ ë„“í˜€.'
      ];

      const careerCorner = [
        {role:'íƒì‚¬ ì§€ì§ˆí•™ì',desc:'ì–´ë–¤ ë°”ìœ„ê°€ ê³¼í•™ì ìœ¼ë¡œ ì¤‘ìš”í•œì§€ ê³ ë¥´ê³ , ìš°ì£¼ë¹„í–‰ì‚¬ë“¤ì´ ë‹¬ì—ì„œ ìƒ˜í”Œì„ ì˜ ìˆ˜ì§‘í•˜ë„ë¡ í›ˆë ¨ì„ ë•ì§€.'},
        {role:'ìš©ì ‘ ê¸°ìˆ ì',desc:'SLSì™€ ì˜¤ë¦¬ì˜¨ ê°™ì€ ê±°ëŒ€í•œ êµ¬ì¡°ë¬¼ì„ ì •ë°€í•˜ê²Œ ì´ì–´ ë¶™ì´ëŠ” ì „ë¬¸ê°€ì•¼.'},
        {role:'ìš°ì£¼ë¹„í–‰ì‚¬',desc:'ë¦¬ë”ì‹­ê³¼ íŒ€ì›Œí¬ë¥¼ ê°–ì¶˜ ë‹¤ì–‘í•œ ë°°ê²½ì˜ ì‚¬ëŒë“¤ì´ ëª¨ì—¬ 2ë…„ ì´ìƒì˜ í›ˆë ¨ ëì— ì„ë¬´ì— ì°¸ì—¬í•´.'}
      ];

      const artemisResources = [
        {title:'Forward to the Moon í¼ì¦ë¶',desc:'ë¯¸ë¡œì™€ ìŠ¤ë„ì¿ ë¡œ ë‹¬ íƒì‚¬ë¥¼ ë³µìŠµí•´ ë³¼ê¹Œ?',url:'https://www.nasa.gov/stem-content/forward-to-the-moon-with-artemis-explorer-activities/'},
        {title:'SLS Meet the Rocket í¬ìŠ¤í„°',desc:'ë¡œì¼“ êµ¬ì¡°ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ê³µì‹ ì¸í¬ê·¸ë˜í”½.',url:'https://www.nasa.gov/humans-in-space/space-launch-system/sls-public-outreach/sls-activities-materials/posters-lithographs-and-bookmarks/'},
        {title:'ì˜¤ë¦¬ì˜¨ í™œë™ì§€ & ìƒ‰ì¹ ê³µë¶€',desc:'ë‹¨ì–´ ì°¾ê¸°ì™€ ë„íŠ¸ ì—°ê²°ë¡œ ìš°ì£¼ì„ ì„ ìµí˜€ ë³´ì.',url:'https://www.nasa.gov/stem-content/orion-activities-and-coloring-sheets/'},
        {title:'Create Your Own Artemis Comic',desc:'ì§ì ‘ ë§Œí™”ë¡œ ì•„ë¥´í…Œë¯¸ìŠ¤ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ì–´ ë³¼ ìˆ˜ ìˆì–´.',url:'https://www.nasa.gov/directorates/somd/space-communications-navigation-program/create-your-own-artemis-comic/'},
        {title:'What Is the Space Launch System?',desc:'SLSì— ëŒ€í•œ ê³µì‹ ì„¤ëª…ì„œë¥¼ í†µí•´ ë” ê¹Šì´ ë“¤ì–´ê°€ì.',url:'https://www.nasa.gov/reference/space-launch-system/'},
        {title:'What Is Orion?',desc:'ì˜¤ë¦¬ì˜¨ ìš°ì£¼ì„ ì´ ì–´ë–»ê²Œ ìš°ë¦¬ë¥¼ ë³´í˜¸í•˜ëŠ”ì§€ ì•Œì•„ë´.',url:'https://www.nasa.gov/humans-in-space/orion-spacecraft/'}
      ];

      const artemisVideos = [
        {title:'We Are Going',desc:'ìœŒë¦¬ì—„ ìƒ¤íŠ¸ë„ˆê°€ ì „í•˜ëŠ” ì•„ë¥´í…Œë¯¸ìŠ¤ ë¹„ì „',src:'https://www.youtube.com/embed/vl6jn-DdafM'},
        {title:'Rocket Science in 60 Seconds â€“ SLS',desc:'1ë¶„ ë§Œì— ë°°ìš°ëŠ” SLS í•µì‹¬',src:'https://www.youtube.com/embed/MLgYJh6OFbY'}
      ];

      const nasaLearnCards = [
        {id:'name',emoji:'ğŸŒ•',title:'ì™œ â€œì•„ë¥´í…Œë¯¸ìŠ¤â€ì¼ê¹Œ?',color:'from-purple-900/50 to-indigo-900/50',short:'ì•„í´ë¡œì˜ ìŒë‘¥ì´ ì—¬ë™ìƒ ì´ì•¼ê¸°!',detail:{desc:artemisNameStory.desc,links:[{label:'NASA ì›ë¬¸ ë³´ê¸°',url:'https://www.nasa.gov/learning-resources/for-kids-and-students/what-is-the-artemis-program-grades-5-8/'}]}},
        {id:'vehicles',emoji:'ğŸš€',title:'ì–´ë–¤ ìš°ì£¼ì„ ì´ ì“°ì¼ê¹Œ?',color:'from-blue-900/50 to-cyan-900/50',short:'SLSÂ·ì˜¤ë¦¬ì˜¨Â·ê²Œì´íŠ¸ì›¨ì´Â·ì°©ë¥™ì„ !',detail:{desc:'íƒ„í¬ì•¼, ì•„ë¥´í…Œë¯¸ìŠ¤ëŠ” ê°•ë ¥í•œ SLS ë¡œì¼“ìœ¼ë¡œ ì˜¤ë¦¬ì˜¨ì„ ì˜ì•„ ì˜¬ë¦¬ê³ , ë‹¬ ê¶¤ë„ì—ì„œ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ê±°ì ìœ¼ë¡œ ì“°ê³ , ì°©ë¥™ì„ ì„ íƒ€ê³  ë‹¬ í‘œë©´ìœ¼ë¡œ ë‚´ë ¤ê°€ëŠ” íë¦„ì´ì•¼.\n\nì•„ë˜ ë§í¬ë¡œ ê° ìš°ì£¼ì„  ê°€ì¡±ì„ ë” ìì„¸íˆ ë³¼ ìˆ˜ ìˆì–´.',links:artemisVehicles.map(v=>({label:v.name,url:v.link}))}},
        {id:'schedule',emoji:'ğŸ—“ï¸',title:'ì–¸ì œ ë‹¬ì— ê°€ë‚˜ìš”?',color:'from-amber-900/50 to-orange-900/50',short:'ì•„ë¥´í…Œë¯¸ìŠ¤ 1Â·2Â·3 í•œ ë²ˆì—!',detail:{desc:artemisSchedule.map(s=>`- ${s.title}: ${s.detail}`).join('\n')}},
        {id:'moon',emoji:'ğŸŒ™',title:'ë‹¬ì—ì„œ ë­˜ í• ê¹Œ?',color:'from-emerald-900/50 to-green-900/50',short:'ë¬¼ ì°¾ê¸°Â·ìƒí™œ ì‹¤í—˜Â·í™”ì„± ì¤€ë¹„!',detail:{desc:lunarPlans.map(p=>`- ${p}`).join('\n')}},
        {id:'why',emoji:'ğŸŒ',title:'ì™œ ì¤‘ìš”í•œê°€ìš”?',color:'from-sky-900/50 to-indigo-900/50',short:'ê³¼í•™Â·ê¸°ìˆ Â·í˜‘ë ¥Â·ë¯¸ë˜!',detail:{desc:artemisImpact.map(p=>`- ${p}`).join('\n')}},
        {id:'career',emoji:'ğŸ§‘â€ğŸš€',title:'ì»¤ë¦¬ì–´ ì½”ë„ˆ',color:'from-gray-800/50 to-gray-700/40',short:'ë‹¬ íƒì‚¬ë¥¼ ë§Œë“œëŠ” ì‚¬ëŒë“¤!',detail:{desc:careerCorner.map(j=>`- ${j.role}: ${j.desc}`).join('\n')}},
        {id:'video1',emoji:'ğŸ“º',title:artemisVideos[0].title,color:'from-red-900/40 to-pink-900/40',short:artemisVideos[0].desc,detail:{desc:'íƒ„í¬ì•¼, ì´ ì˜ìƒì€ NASAê°€ â€œìš°ë¦¬ëŠ” ë‹¤ì‹œ ê°„ë‹¤â€ë¥¼ ì•„ì£¼ ë©‹ì§€ê²Œ ë³´ì—¬ì¤˜.',vid:artemisVideos[0].src}},
        {id:'video2',emoji:'ğŸ“º',title:artemisVideos[1].title,color:'from-yellow-900/40 to-amber-900/40',short:artemisVideos[1].desc,detail:{desc:'íƒ„í¬ì•¼, SLSê°€ ì™œ íŠ¹ë³„í•œì§€ 1ë¶„ ë§Œì— ì •ë¦¬í•´ì£¼ëŠ” ì˜ìƒì´ì•¼.',vid:artemisVideos[1].src}},
        {id:'resources',emoji:'ğŸ“š',title:'ë” í•´ë³¼ ê±°ë¦¬',color:'from-indigo-900/40 to-purple-900/40',short:'í¼ì¦Â·í¬ìŠ¤í„°Â·ìƒ‰ì¹ ê³µë¶€Â·ë§Œí™”!',detail:{desc:'íƒ„í¬ì•¼, NASAê°€ ë¬´ë£Œë¡œ ì¤€ë¹„í•´ ë‘” í™œë™ì§€ë“¤ì´ì•¼.\n\nì•„ë˜ ë§í¬ì—ì„œ ê³¨ë¼ì„œ í•´ ë³´ì!',links:artemisResources.map(r=>({label:r.title,url:r.url}))}}
      ];

      const quizzes = [
        {q:'íƒ„í¬ì•¼, SLS ë¡œì¼“ì€ ë¬´ì—‡ë³´ë‹¤ ë” ë†’ì•˜ì„ê¹Œ?',o:['ììœ ì˜ ì—¬ì‹ ìƒ','ì—í íƒ‘','ë‚¨ì‚°íƒ€ì›Œ'],a:0},
        {q:'íƒ„í¬ì•¼, ë‹¬ê¹Œì§€ ê°€ëŠ” ë° ë©°ì¹  ê±¸ë ¸ì„ê¹Œ?',o:['1ì¼','4ì¼','30ì¼'],a:1},
        {q:'ì˜¤ë¦¬ì˜¨ ìº¡ìŠì—ëŠ” ìš°ì£¼ì¸ì´ ëª‡ ëª… íƒˆê¹Œ?',o:['2ëª…','4ëª…','10ëª…'],a:1},
        {q:'íƒ„í¬ì•¼, ë‹¬ì— ì²« ë°œì„ ë‚´ë””ë”˜ ì‚¬ëŒì€ ëˆ„êµ¬ì˜€ì„ê¹Œ?',o:['ë²„ì¦ˆ ì˜¬ë“œë¦°','ë‹ ì•”ìŠ¤íŠ¸ë¡±','ë§ˆì´í´ ì½œë¦°ìŠ¤'],a:1},
        {q:'ê·¸ë¦¬ìŠ¤ì—ì„œ ë‹¬ì˜ ì—¬ì‹ ìœ¼ë¡œ ë¶ˆë¦° ì¡´ì¬ëŠ” ëˆ„êµ¬ì¼ê¹Œ?',o:['ì•„í…Œë‚˜','ì…€ë ˆë„¤','í—¤ë¼'],a:1},
        {q:'íƒ„í¬ì•¼, ë¡œì¼“ ë§¨ ìœ„ì˜ ë¹„ìƒìš© ì¥ì¹˜ëŠ” ë¬´ì—‡ì¼ê¹Œ?',o:['íƒˆì¶œ ì‹œìŠ¤í…œ','ë¶€ìŠ¤í„°','ì›”ë©´ì°¨'],a:0}
      ];

      const Modal = ({card,onClose}) => (
        <div className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-3" onClick={onClose}>
          <div className="bg-gradient-to-br from-gray-900 to-indigo-950 rounded-2xl max-w-md w-full max-h-[85vh] overflow-y-auto border border-indigo-500/30" onClick={e=>e.stopPropagation()}>
            <div className="p-4">
              <div className="flex justify-between items-center mb-3">
                <h2 className="text-lg font-bold text-yellow-300">{card.emoji || 'ğŸŒ™'} {card.title}</h2>
                <button onClick={onClose} className="text-2xl text-gray-400 hover:text-white">âœ•</button>
              </div>
              {card.detail.img && <img src={card.detail.img} alt={card.title} className="w-full h-36 object-cover rounded-xl mb-3"/>}
              <p className="text-sm whitespace-pre-line mb-4 text-gray-200 leading-relaxed">{card.detail.desc}</p>
              {Array.isArray(card.detail.links) && card.detail.links.length > 0 && (
                <div className="space-y-2 mb-4">
                  <p className="text-xs text-gray-400 font-bold">ğŸ”— ë” ë³´ê¸°</p>
                  <div className="space-y-2">
                    {card.detail.links.map((l,i)=>(
                      <a key={i} href={l.url} target="_blank" rel="noreferrer" className="block text-sm text-cyan-300 underline break-words">
                        {l.label}
                      </a>
                    ))}
                  </div>
                </div>
              )}
              {card.detail.vid && <div className="rounded-xl overflow-hidden aspect-video"><iframe src={card.detail.vid} className="w-full h-full" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen/></div>}
            </div>
          </div>
        </div>
      );

      const Card = ({card,onClick}) => {
        const [tilt, setTilt] = useState({rx:0, ry:0});
        const [pressing, setPressing] = useState(false);
        useEffect(() => {
          if (!pressing) return;
          const t = setTimeout(() => {
            sfx('click');
            showToast('ğŸ‘€ ë¯¸ë¦¬ë³´ê¸°!');
            onClick();
          }, 520);
          return () => clearTimeout(t);
        }, [pressing]);

        const id = card.id || card.title;
        const isFav = favorites.has(id);
        const isPinned = pinned.has(id);

        return (
          <button
            onClick={() => { sfx('click'); onClick(); }}
            onDoubleClick={(e) => {
              e.preventDefault();
              setFavorites(prev => {
                const n = new Set(prev);
                if (n.has(id)) { n.delete(id); showToast('â­ í•´ì œ!'); }
                else { n.add(id); showToast('â­ ì €ì¥!'); }
                return n;
              });
              sfx('fav');
            }}
            onContextMenu={(e) => {
              e.preventDefault();
              setPinned(prev => {
                const n = new Set(prev);
                if (n.has(id)) { n.delete(id); showToast('ğŸ“Œ í•´ì œ!'); }
                else { n.add(id); showToast('ğŸ“Œ ê³ ì •!'); }
                return n;
              });
              sfx('pin');
            }}
            onPointerDown={() => setPressing(true)}
            onPointerUp={() => setPressing(false)}
            onPointerCancel={() => setPressing(false)}
            onMouseMove={(e) => {
              const r = e.currentTarget.getBoundingClientRect();
              const px = (e.clientX - r.left) / r.width;
              const py = (e.clientY - r.top) / r.height;
              setTilt({ rx: (0.5 - py) * 10, ry: (px - 0.5) * 12 });
            }}
            onMouseLeave={() => setTilt({rx:0,ry:0})}
            className={`relative p-3 bg-gradient-to-r ${card.color} rounded-xl text-left transition-all hover:ring-2 hover:ring-yellow-400/50 w-full ${isPinned?'ring-2 ring-cyan-400/70':''}`}
            style={{ transform: `perspective(600px) rotateX(${tilt.rx}deg) rotateY(${tilt.ry}deg)` }}
          >
            <div className="absolute right-2 top-2 flex gap-1">
              {isPinned && <span className="text-xs bg-black/40 px-2 py-1 rounded-full border border-cyan-400/30">ğŸ“Œ</span>}
              {isFav && <span className="text-xs bg-black/40 px-2 py-1 rounded-full border border-yellow-400/30">â­</span>}
            </div>
            <div className="flex items-center gap-2 mb-1">
              <span className={`text-lg ${pressing?'wiggle':''}`}>{card.emoji}</span>
              <h3 className="font-bold text-sm">{card.title}</h3>
            </div>
            <p className="text-xs text-gray-300">{card.short}</p>
            <div className="flex items-center justify-between mt-2 text-[11px] text-yellow-300">
              <span>ğŸ‘† í´ë¦­</span>
              <span className="text-gray-400">ë”ë¸”=â­ Â· ìš°í´ë¦­=ğŸ“Œ Â· ê¸¸ê²Œ=ğŸ‘€</span>
            </div>
          </button>
        );
      };

      const Home = () => (
        <div className="text-center space-y-5">
          <div className="text-5xl animate-bounce">ğŸš€</div>
          <h1 className="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500">íƒ„í¬ì˜ ë‹¬ íƒí—˜ ëŒ€ëª¨í—˜!</h1>
          <p className="text-blue-200">íƒ„í¬ì•¼, ìš°ë¦¬ê°€ ë§Œë“¤ ë ˆê³  ì•„ë¥´í…Œë¯¸ìŠ¤ 2í˜¸ë‘ ì‹ ë‚˜ê²Œ ë– ë‚˜ë³´ì!</p>
          <p className="text-sm text-gray-300">ì‚¼ì´Œì´ ì¤€ë¹„í•œ ë¡œì¼“ ëª¨í˜•ì„ ìƒìƒí•˜ë©´ì„œ ì•„ë˜ ë²„íŠ¼ë“¤ì„ ëˆŒëŸ¬ ë³´ë©´ ë” ìƒìƒí•˜ê²Œ ëŠê»´ì§ˆ ê±°ì•¼.</p>
          <div className="grid grid-cols-2 gap-3">
            {[{id:'earth',icon:'ğŸŒ',name:'íƒ„í¬ì˜ ì§€êµ¬Â·ë‹¬ ì´ì•¼ê¸°',c:'from-blue-600 to-cyan-600'},{id:'myth',icon:'ğŸ›ï¸',name:'íƒ„í¬ê°€ ë“£ëŠ” ë‹¬ ì‹ í™”',c:'from-purple-600 to-pink-600'},{id:'apollo',icon:'ğŸš€',name:'íƒ„í¬ì™€ ì•„í´ë¡œ',c:'from-orange-600 to-red-600'},{id:'artemis',icon:'ğŸŒ™',name:'íƒ„í¬ì˜ ì•„ë¥´í…Œë¯¸ìŠ¤',c:'from-indigo-600 to-purple-600'}].map(s=>
              <button key={s.id} onClick={()=>setSection(s.id)} className={`p-4 bg-gradient-to-br ${s.c} rounded-xl hover:scale-105 transition-transform`}>
                <div className="text-3xl mb-2">{s.icon}</div>
                <div className="font-bold text-sm">{s.name}</div>
              </button>
            )}
          </div>
          <div className="p-4 bg-yellow-500/20 rounded-xl border border-yellow-500/50">
            <p className="text-yellow-300 font-bold">â° íƒ„í¬ë‘ ì•½ì†í•œ ë°œì‚¬</p>
            <p className="text-xl font-bold text-white mt-1">2026ë…„ 4ì›”ì„ ê¸°ë‹¤ë¦¬ì!</p>
          </div>
        </div>
      );

      const MoonBasics = () => {
        const [zoom, setZoom] = useState(1.1);
        const [pos, setPos] = useState({x: 78, y: 62}); // %
        const [dragging, setDragging] = useState(false);
        const moonImg = 'https://photojournal.jpl.nasa.gov/jpeg/PIA12235.jpg';
        // ìŠ¤í¬ë˜ì¹˜(ê¸ê¸°) ìº”ë²„ìŠ¤
        const scratchRef = useRef(null);
        const scratchWrapRef = useRef(null);
        const [scratchReady, setScratchReady] = useState(false);
        const [scratching, setScratching] = useState(false);
        const [scratchHint, setScratchHint] = useState(false);
        const crater = useRef({x: 0.62, y: 0.48, r: 0.14}); // 0~1

        const resetScratch = () => {
          const canvas = scratchRef.current;
          const wrap = scratchWrapRef.current;
          if (!canvas || !wrap) return;
          const dpr = window.devicePixelRatio || 1;
          const w = Math.floor(wrap.clientWidth);
          const h = Math.floor(wrap.clientHeight);
          canvas.width = Math.floor(w * dpr);
          canvas.height = Math.floor(h * dpr);
          canvas.style.width = `${w}px`;
          canvas.style.height = `${h}px`;
          const ctx = canvas.getContext('2d');
          ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = 'rgba(10,10,15,0.92)';
          ctx.fillRect(0, 0, w, h);
          ctx.fillStyle = 'rgba(255,255,255,0.08)';
          for (let i = 0; i < 14; i++) {
            ctx.beginPath();
            ctx.arc(Math.random()*w, Math.random()*h, 10 + Math.random()*22, 0, Math.PI*2);
            ctx.fill();
          }
          setScratchReady(true);
        };

        const scratchAt = (clientX, clientY) => {
          const canvas = scratchRef.current;
          const wrap = scratchWrapRef.current;
          if (!canvas || !wrap) return;
          const r = wrap.getBoundingClientRect();
          const x = clientX - r.left;
          const y = clientY - r.top;
          const ctx = canvas.getContext('2d');
          ctx.globalCompositeOperation = 'destination-out';
          ctx.beginPath();
          ctx.arc(x, y, 18, 0, Math.PI*2);
          ctx.fill();
        };

        const checkCrater = () => {
          const canvas = scratchRef.current;
          const wrap = scratchWrapRef.current;
          if (!canvas || !wrap) return;
          const w = wrap.clientWidth;
          const h = wrap.clientHeight;
          const ctx = canvas.getContext('2d');
          const cx = crater.current.x * w;
          const cy = crater.current.y * h;
          const rr = crater.current.r * Math.min(w, h);
          // í¬ë ˆì´í„° ì˜ì—­ ìƒ˜í”Œë§: ì•ŒíŒŒê°€ ë§ì´ ì§€ì›Œì¡Œìœ¼ë©´ ì„±ê³µ
          const img = ctx.getImageData(Math.max(0, Math.floor(cx - rr)), Math.max(0, Math.floor(cy - rr)), Math.floor(rr*2), Math.floor(rr*2));
          let clear = 0;
          const step = 16; // ì„±ëŠ¥ ìœ„í•´ ë“¬ì„±ë“¬ì„±
          for (let i = 3; i < img.data.length; i += 4*step) {
            if (img.data[i] < 40) clear++;
          }
          const ratio = clear / (img.data.length / (4*step));
          if (ratio > 0.55) {
            award('moon-scratch', 'ğŸª¨', 'í¬ë ˆì´í„° ë°œê²¬');
            showToast('ğŸª¨ í¬ë ˆì´í„° ë°œê²¬!');
          }
        };

        useEffect(() => {
          resetScratch();
          const onResize = () => resetScratch();
          window.addEventListener('resize', onResize);
          return () => window.removeEventListener('resize', onResize);
        }, []);

        useEffect(() => {
          // â€œê°€ê¹Œì´ ê°–ë‹¤ ëŒ€ê¸°â€ ìŠ¤í‹°ì»¤
          const dx = pos.x - 22;
          const dy = pos.y - 55;
          const dist = Math.sqrt(dx*dx + dy*dy);
          if (dist < 10) award('moon-close', 'ğŸŒ™', 'ë‹¬ ê°€ê¹Œì´!');
        }, [pos.x, pos.y]);

        // ì¤‘ë ¥ ìŠ¬ë¼ì´ë” + ì í”„(íƒ­) ì¶”ê°€
        const [g, setG] = useState(1.62); // moon gravity approx
        const [jumping, setJumping] = useState(false);
        const [jumpPower, setJumpPower] = useState(50);

        const doJump = () => {
          if (jumping) return;
          setJumping(true);
          sfx('click');
          showToast('ğŸ¦˜ ì í”„!');
          // ì¤‘ë ¥ì´ ë‚®ì„ìˆ˜ë¡ ë” ë†’ì´
          const height = clamp((jumpPower / g) * 6, 20, 160);
          if (g < 2 && jumpPower > 70) award('moon-superjump', 'ğŸ¦˜', 'ìŠˆí¼ ì í”„');
          setTimeout(() => setJumping(false), 620);
          return height;
        };

        const [lastHeight, setLastHeight] = useState(60);

        return (
          <div className="h-[calc(100vh-104px)] flex flex-col gap-3">
            <div className="text-center space-y-1">
              <h2 className="text-xl font-bold">ğŸŒ™ ë‹¬ ê¸°ì´ˆ</h2>
              <p className="text-xs text-gray-300">íƒ„í¬ì•¼, ë‹¬ì„ ë“œë˜ê·¸í•´ì„œ ì§€êµ¬ ìª½ì— ë¶™ì—¬ë´. ê·¸ë¦¬ê³  ì¤Œë„ ì˜¬ë ¤ë´!</p>
            </div>

            <div className="bg-gray-900/40 border border-gray-700/40 rounded-2xl p-3 space-y-2">
              <div className="flex items-center justify-between">
                <p className="text-xs text-gray-300">ğŸ” ë‹¬ ì¤Œ</p>
                <button
                  className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                  onClick={() => { setZoom(z => clamp(z + 0.25, 1, 2.5)); sfx('click'); if (zoom >= 2.0) award('moon-zoom', 'ğŸ”', 'ì¤Œ ë§ˆìŠ¤í„°'); }}
                >
                  + í™•ëŒ€
                </button>
              </div>
              <input
                type="range"
                min="1"
                max="2.5"
                step="0.05"
                value={zoom}
                onChange={(e)=>{ setZoom(parseFloat(e.target.value)); if (parseFloat(e.target.value) >= 2.2) award('moon-zoom', 'ğŸ”', 'ì¤Œ ë§ˆìŠ¤í„°'); }}
                className="w-full"
              />
              <div className="relative h-36 rounded-xl overflow-hidden border border-gray-700/40 bg-black">
                <img
                  src={moonImg}
                  alt="Moon"
                  className="absolute inset-0 w-full h-full object-cover"
                  style={{ transform: `scale(${zoom})`, transformOrigin: 'center' }}
                  onDoubleClick={() => { setZoom(1.1); sfx('click'); showToast('â†©ï¸ ë¦¬ì…‹'); }}
                />
                <div className="absolute bottom-2 left-2 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40">
                  ë”ë¸”í´ë¦­ = ì¤Œ ë¦¬ì…‹
                </div>
              </div>
            </div>

            <div className="bg-gray-900/40 border border-gray-700/40 rounded-2xl p-3 space-y-2">
              <div className="flex items-center justify-between">
                <p className="text-xs text-gray-300">ğŸª¨ ìŠ¤í¬ë˜ì¹˜: ìˆ¨ì€ í¬ë ˆì´í„° ì°¾ê¸°</p>
                <div className="flex gap-2">
                  <button
                    onClick={()=>{ setScratchHint(true); sfx('click'); showToast('ğŸ‘€ íŒíŠ¸!'); award('moon-hint','ğŸ‘€','íŒíŠ¸'); setTimeout(()=>setScratchHint(false), 650); }}
                    className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                  >
                    íŒíŠ¸
                  </button>
                  <button
                    onClick={()=>{ resetScratch(); sfx('click'); showToast('ğŸ”„ ë‹¤ì‹œ'); }}
                    className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                  >
                    ë¦¬ì…‹
                  </button>
                </div>
              </div>
              <p className="text-[11px] text-gray-400">íƒ„í¬ì•¼, ìœ„ë¥¼ ì†ê°€ë½(ë§ˆìš°ìŠ¤)ë¡œ â€œê¸ì–´ì„œâ€ í¬ë ˆì´í„°ë¥¼ ì°¾ì•„ë´!</p>
              <div ref={scratchWrapRef} className="relative h-32 rounded-xl overflow-hidden border border-gray-700/40 bg-black select-none">
                <img src={moonImg} alt="Moon surface" className="absolute inset-0 w-full h-full object-cover opacity-90"/>
                {scratchHint && (
                  <div
                    className="absolute rounded-full border-2 border-yellow-300/80"
                    style={{
                      left: `${crater.current.x*100}%`,
                      top: `${crater.current.y*100}%`,
                      width: `${crater.current.r*200}%`,
                      height: `${crater.current.r*200}%`,
                      transform: 'translate(-50%,-50%)'
                    }}
                  />
                )}
                <canvas
                  ref={scratchRef}
                  className="absolute inset-0"
                  onPointerDown={(e)=>{ if (!scratchReady) return; e.currentTarget.setPointerCapture(e.pointerId); setScratching(true); scratchAt(e.clientX,e.clientY); sfx('click'); }}
                  onPointerMove={(e)=>{ if (!scratching) return; scratchAt(e.clientX,e.clientY); }}
                  onPointerUp={()=>{ setScratching(false); checkCrater(); }}
                  onPointerCancel={()=>setScratching(false)}
                />
                <div className="absolute bottom-2 right-2 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40">
                  ë“œë˜ê·¸=ê¸ê¸°
                </div>
              </div>
            </div>

            <div className="bg-gray-900/40 border border-gray-700/40 rounded-2xl p-3 space-y-2">
              <div className="flex items-center justify-between">
                <p className="text-xs text-gray-300">ğŸ§² ì¤‘ë ¥ ë†€ì´</p>
                <button
                  className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                  onClick={()=>{ setG(1.62); setJumpPower(50); sfx('click'); showToast('â†©ï¸ ê¸°ë³¸'); }}
                >
                  ë‹¬(ê¸°ë³¸)
                </button>
              </div>
              <div className="grid grid-cols-2 gap-2">
                <button onClick={()=>{ setG(9.81); sfx('click'); showToast('ğŸŒ ì§€êµ¬'); award('moon-gravity', 'ğŸ§²', 'ì¤‘ë ¥'); }} className="py-2 rounded-xl bg-gray-800/60 border border-gray-600/40 text-xs font-bold">ğŸŒ ì§€êµ¬</button>
                <button onClick={()=>{ setG(1.62); sfx('click'); showToast('ğŸŒ™ ë‹¬'); award('moon-gravity', 'ğŸ§²', 'ì¤‘ë ¥'); }} className="py-2 rounded-xl bg-gray-800/60 border border-gray-600/40 text-xs font-bold">ğŸŒ™ ë‹¬</button>
              </div>
              <p className="text-[11px] text-gray-400">ìŠ¬ë¼ì´ë”ë¡œ ì¤‘ë ¥ì„ ë°”ê¾¸ê³  ì í”„í•´ë´!</p>
              <input type="range" min="0.8" max="12" step="0.05" value={g} onChange={(e)=>setG(parseFloat(e.target.value))} className="w-full"/>
              <div className="flex items-center justify-between text-[11px] text-gray-400">
                <span>ì•½í•¨</span><span>g={g.toFixed(2)}</span><span>ê°•í•¨</span>
              </div>
              <input type="range" min="10" max="100" step="1" value={jumpPower} onChange={(e)=>setJumpPower(parseInt(e.target.value,10))} className="w-full"/>
              <div className="flex items-center justify-between text-[11px] text-gray-400">
                <span>ì í”„ í˜</span><span>{jumpPower}</span><span>ê°•í•˜ê²Œ!</span>
              </div>
              <div className="relative h-24 rounded-xl overflow-hidden border border-gray-700/40 bg-gradient-to-b from-black to-gray-900">
                <div className="absolute bottom-2 left-2 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40">ìŠ¤í‹°ì»¤: ğŸ¦˜</div>
                <div className="absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-r from-gray-700/30 to-gray-800/50"/>
                <div className="absolute bottom-3 left-1/2" style={{transform:'translateX(-50%)'}}>
                  <div
                    className={`text-2xl transition-transform duration-500 ${jumping?'wiggle':''}`}
                    style={{ transform: `translateY(-${jumping ? lastHeight : 0}px)` }}
                  >
                    ğŸ‘¨â€ğŸš€
                  </div>
                </div>
              </div>
              <button
                onClick={() => { const h = doJump(); if (typeof h === 'number') setLastHeight(h); }}
                className="w-full py-3 rounded-2xl bg-gradient-to-r from-green-600 to-emerald-600 font-black"
              >
                ğŸ¦˜ ì í”„!
              </button>
            </div>

            <div className="relative flex-1 bg-gradient-to-br from-black/40 to-indigo-950/30 border border-gray-700/40 rounded-2xl overflow-hidden">
              <div className="absolute left-[10%] top-[45%] text-center select-none">
                <div className="w-14 h-14 bg-gradient-to-br from-blue-500 to-green-500 rounded-full animate-pulse" />
                <p className="mt-1 text-xs font-bold">ì§€êµ¬</p>
              </div>

              <div
                className={`absolute w-10 h-10 rounded-full bg-gradient-to-br from-gray-200 to-gray-500 border border-gray-300/50 ${dragging?'wiggle':''}`}
                style={{ left: `${pos.x}%`, top: `${pos.y}%`, transform: 'translate(-50%,-50%)' }}
                onPointerDown={(e)=>{ e.currentTarget.setPointerCapture(e.pointerId); setDragging(true); sfx('click'); }}
                onPointerUp={()=>setDragging(false)}
                onPointerMove={(e)=>{
                  if (!dragging) return;
                  const r = e.currentTarget.parentElement.getBoundingClientRect();
                  const x = ((e.clientX - r.left) / r.width) * 100;
                  const y = ((e.clientY - r.top) / r.height) * 100;
                  setPos({ x: clamp(x, 8, 92), y: clamp(y, 10, 90) });
                }}
              />
              <div className="absolute right-2 top-2 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40">
                ë“œë˜ê·¸=ì›€ì§ì´ê¸°
              </div>
              <div className="absolute bottom-2 right-2 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40">
                ìŠ¤í‹°ì»¤: ğŸ”ì¤Œ / ğŸŒ™ê°€ê¹Œì´
              </div>
            </div>

            <div className="grid grid-cols-2 gap-3">
              {earthCards.map(c=><Card key={c.id} card={c} onClick={()=>{ award(`moon-card-${c.id}`,'âœ¨','ë‹¬ ì¹´ë“œ'); setModal(c); }}/>)}
            </div>
          </div>
        );
      };

      const MoonHistory = () => (
        (() => {
          const [idx, setIdx] = useState(0);
          const [last, setLast] = useState({t:0, v:0});
          const [dragMode, setDragMode] = useState(false);
          const [dragStart, setDragStart] = useState(null);
          const cur = historyCards[idx];
          const [egg, setEgg] = useState(() => ({
            x: 12 + Math.random()*76,
            y: 18 + Math.random()*62,
            found: false,
            hint: false
          }));
          return (
            <div className="h-[calc(100vh-104px)] flex flex-col gap-3">
              <div className="text-center space-y-1">
                <h2 className="text-xl font-bold">ğŸ“œ ë‹¬ ì—­ì‚¬</h2>
                <p className="text-xs text-gray-300">íƒ„í¬ì•¼, ë°”ë¥¼ ì“±ì“± ì›€ì§ì´ë©´ â€œì‹œê°„ì—¬í–‰â€ì´ì•¼.</p>
              </div>

              <div
                className={`bg-gray-900/40 border border-gray-700/40 rounded-2xl p-3 space-y-2 ${dragMode?'ring-2 ring-purple-400/40':''}`}
                onPointerDown={(e)=>{
                  if (!dragMode) return;
                  setDragStart({x: e.clientX, idx});
                  e.currentTarget.setPointerCapture(e.pointerId);
                }}
                onPointerMove={(e)=>{
                  if (!dragMode || !dragStart) return;
                  const dx = e.clientX - dragStart.x;
                  const step = Math.round(dx / 28);
                  setIdx(clamp(dragStart.idx + step, 0, historyCards.length - 1));
                }}
                onPointerUp={()=>{
                  if (!dragMode) return;
                  setDragStart(null);
                  award('history-scrub-drag','ğŸ«³','ë“œë˜ê·¸');
                }}
                onPointerCancel={()=>setDragStart(null)}
              >
                <div className="flex items-center justify-between">
                  <p className="text-xs text-gray-300">ğŸ§­ íƒ€ì„ë¼ì¸ ìŠ¤í¬ëŸ½</p>
                  <div className="flex gap-2">
                    <button
                      className={`text-xs px-3 py-1 rounded-full border ${dragMode?'bg-purple-600/25 border-purple-400/30':'bg-gray-800/70 border-gray-700/50'}`}
                      onClick={()=>{ setDragMode(v=>!v); sfx('click'); showToast('ğŸ«³ ë“œë˜ê·¸ ìŠ¤í¬ëŸ½'); }}
                    >
                      ğŸ«³ ë“œë˜ê·¸
                    </button>
                    <button
                      className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                      onClick={()=>{ const n = Math.floor(Math.random()*historyCards.length); setIdx(n); sfx('click'); showToast('â© ì í”„!'); award('history-jump','â©','ì í”„'); }}
                    >
                      ëœë¤ ì í”„
                    </button>
                    <button
                      className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                      onClick={()=>{ setEgg(e=>({...e, hint:true})); sfx('click'); showToast('ğŸ•µï¸ íŒíŠ¸'); setTimeout(()=>setEgg(e=>({...e, hint:false})), 650); }}
                    >
                      ğŸ•µï¸ ìˆ¨ì€ ë²„íŠ¼
                    </button>
                  </div>
                </div>
                {dragMode && <p className="text-[11px] text-purple-200/80">ì—¬ê¸°ì„œ ì¢Œìš°ë¡œ ë“œë˜ê·¸í•˜ë©´ ì‹œê°„ì´ â€œìŠ¥ìŠ¥â€ ì´ë™í•´!</p>}
                <input
                  type="range"
                  min="0"
                  max={historyCards.length-1}
                  step="1"
                  value={idx}
                  onChange={(e)=>{
                    const v = parseInt(e.target.value,10);
                    const now = Date.now();
                    const dt = now - last.t;
                    const dv = Math.abs(v - last.v);
                    setLast({t: now, v});
                    setIdx(v);
                    if (dt < 120 && dv >= 2) award('history-warp','ğŸŒ€','ì‹œê°„ì—¬í–‰');
                    sfx('click');
                  }}
                  className="w-full"
                />
                <div className="text-[11px] text-gray-400 flex justify-between">
                  <span>ì˜›ë‚ </span><span>ì§€ê¸ˆ</span>
                </div>
              </div>

              <div className="flex-1 overflow-y-auto pr-1 space-y-3 relative">
                {!egg.found && (
                  <button
                    className={`absolute z-10 ${egg.hint?'spark':''}`}
                    style={{ left: `${egg.x}%`, top: `${egg.y}%` }}
                    onClick={()=>{
                      setEgg(e=>({...e, found:true}));
                      award('history-egg','ğŸ•µï¸','ìˆ¨ì€ ë²„íŠ¼');
                      showToast('ğŸ•µï¸ ë°œê²¬!');
                    }}
                    aria-label="hidden-egg"
                  >
                    <span className={`text-xl ${egg.hint?'wiggle':''}`}>â­</span>
                  </button>
                )}
                {egg.hint && !egg.found && (
                  <div className="absolute left-2 top-2 z-10 text-[11px] bg-black/60 px-2 py-1 rounded-full border border-gray-600/40 pointer-events-none">
                    íŒíŠ¸ ì¤‘â€¦ ë³„ì„ ì°¾ì•„ë´!
                  </div>
                )}
                <div className="bg-gray-900/60 border border-gray-700/40 rounded-2xl overflow-hidden">
                  {cur.detail.img && <img src={cur.detail.img} alt={cur.title} className="w-full h-40 object-cover"/>}
                  <div className="p-3 space-y-2">
                    <div className="flex items-center justify-between">
                      <p className="font-bold">{cur.emoji} {cur.title}</p>
                      <button className="text-xs text-cyan-300 underline" onClick={()=>{ award(`history-open-${cur.id}`,'ğŸ“œ','ì—´ê¸°'); setModal(cur); }}>ì—´ê¸°</button>
                    </div>
                    <p className="text-xs text-gray-300">{cur.short}</p>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-3">
                  {historyCards.map(c=><Card key={c.id} card={c} onClick={()=>{ award(`history-card-${c.id}`,'âœ¨','ì—­ì‚¬ ì¹´ë“œ'); setModal(c); }}/>)}
                </div>
              </div>
            </div>
          );
        })()
      );

      const Apollo = () => {
        const [tab, setTab] = useState('game'); // game | cards
        const [kbMode, setKbMode] = useState(false);
        const [x, setX] = useState(50);
        const [y, setY] = useState(10);
        const [vx, setVx] = useState(0);
        const [vy, setVy] = useState(0);
        const [fuel, setFuel] = useState(100);
        const [wind, setWind] = useState(0); // -0.06 ~ 0.06
        const [gScale, setGScale] = useState(1.0); // 0.7 ~ 1.4
        const [thrust, setThrust] = useState(false);
        const [left, setLeft] = useState(false);
        const [right, setRight] = useState(false);
        const [status, setStatus] = useState(''); // landed/crashed
        const padX = 58;
        const padW = 18;

        useEffect(() => {
          if (tab !== 'game') return;
          const t = setInterval(() => {
            if (status) return;
            setVy(v => v + 0.08 * gScale); // gravity
            setVx(v => clamp(v + (right ? 0.03 : 0) - (left ? 0.03 : 0), -1.2, 1.2));
            if (Math.abs(wind) > 0.0001) setVx(v => clamp(v + wind, -1.4, 1.4));
            if (thrust && fuel > 0) {
              setVy(v => v - 0.18);
              setFuel(f => Math.max(0, f - 0.35));
            }
            setX(v => clamp(v + vx, 5, 95));
            setY(v => clamp(v + vy, 0, 92));
          }, 16);
          return () => clearInterval(t);
        }, [tab, thrust, left, right, fuel, vx, vy, status]);

        useEffect(() => {
          if (tab !== 'game' || !kbMode) return;
          const onDown = (e) => {
            if (e.key === 'ArrowLeft') setLeft(true);
            if (e.key === 'ArrowRight') setRight(true);
            if (e.key === ' ') setThrust(true);
          };
          const onUp = (e) => {
            if (e.key === 'ArrowLeft') setLeft(false);
            if (e.key === 'ArrowRight') setRight(false);
            if (e.key === ' ') setThrust(false);
          };
          window.addEventListener('keydown', onDown);
          window.addEventListener('keyup', onUp);
          return () => { window.removeEventListener('keydown', onDown); window.removeEventListener('keyup', onUp); };
        }, [tab, kbMode]);

        useEffect(() => {
          if (tab !== 'game') return;
          if (status) return;
          if (y < 92) return;
          const onPad = x > padX - padW/2 && x < padX + padW/2;
          const soft = Math.abs(vy) < 1.2 && Math.abs(vx) < 0.9;
          if (onPad && soft) {
            setStatus('landed');
            award('apollo-lander', 'ğŸ', 'ì°©ë¥™ ì„±ê³µ');
            showToast('ğŸ ì°©ë¥™ ì„±ê³µ!');
          } else {
            setStatus('crashed');
            setShakeScreen(true);
            sfx('boom');
            setTimeout(()=>setShakeScreen(false), 420);
            showToast('ğŸ’¥ ê½!');
          }
        }, [y, x, vx, vy, status, tab]);

        const reset = () => {
          setX(50); setY(10); setVx(0); setVy(0); setFuel(100);
          setThrust(false); setLeft(false); setRight(false); setStatus('');
          sfx('click'); showToast('â†©ï¸ ë‹¤ì‹œ!');
        };

        return (
          <div className="h-[calc(100vh-104px)] flex flex-col gap-3">
            <div className="text-center space-y-1">
              <h2 className="text-xl font-bold">ğŸš€ ì•„í´ë¡œ</h2>
              <p className="text-xs text-gray-300">íƒ„í¬ì•¼, ì°©ë¥™ ê²Œì„ ë¨¼ì €? ì•„ë‹ˆë©´ ì¹´ë“œ?</p>
            </div>

            <div className="grid grid-cols-2 gap-2">
              <button onClick={()=>{setTab('game'); sfx('click');}} className={`py-2 rounded-lg text-xs font-bold border ${tab==='game'?'bg-gradient-to-r from-orange-600 to-red-600 border-orange-300/50':'bg-gray-900/50 border-gray-700/50'}`}>ğŸ® ì°©ë¥™</button>
              <button onClick={()=>{setTab('cards'); sfx('click');}} className={`py-2 rounded-lg text-xs font-bold border ${tab==='cards'?'bg-gradient-to-r from-blue-600 to-indigo-600 border-blue-300/50':'bg-gray-900/50 border-gray-700/50'}`}>ğŸƒ ì¹´ë“œ</button>
            </div>

            {tab === 'game' ? (
              <div className="flex-1 flex flex-col gap-3">
                <div className="bg-gray-900/40 border border-gray-700/40 rounded-2xl p-3 space-y-2">
                  <div className="flex items-center justify-between text-xs text-gray-300">
                    <span>ì—°ë£Œ: {fuel.toFixed(0)}%</span>
                    <span>ì†ë„Y: {vy.toFixed(2)} Â· ì†ë„X: {vx.toFixed(2)}</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <p className="text-[11px] text-gray-400">í‚¤ë³´ë“œ ëª¨ë“œ: â† â†’ / ìŠ¤í˜ì´ìŠ¤</p>
                    <button
                      onClick={()=>{ setKbMode(v=>!v); sfx('click'); showToast('âŒ¨ï¸ í‚¤ë³´ë“œ'); award('apollo-kb','âŒ¨ï¸','í‚¤ë³´ë“œ'); }}
                      className={`text-xs px-3 py-1 rounded-full border ${kbMode?'bg-purple-600/25 border-purple-400/30':'bg-gray-800/70 border-gray-700/50'}`}
                    >
                      {kbMode ? 'ON' : 'OFF'}
                    </button>
                  </div>
                  <div className="grid grid-cols-2 gap-2">
                    <button
                      onClick={()=>{ setWind(0); setGScale(1.0); sfx('click'); showToast('ğŸ˜Œ ì‰¬ì›€'); award('apollo-difficulty','ğŸšï¸','ë‚œì´ë„'); }}
                      className="py-2 rounded-xl bg-gray-800/60 border border-gray-600/40 text-xs font-bold"
                    >
                      ğŸ˜Œ ì‰¬ì›€
                    </button>
                    <button
                      onClick={()=>{ setWind(pick([-0.03, 0.03, -0.045, 0.045])); setGScale(1.25); sfx('click'); showToast('ğŸŒªï¸ ì–´ë ¤ì›€'); award('apollo-difficulty','ğŸšï¸','ë‚œì´ë„'); }}
                      className="py-2 rounded-xl bg-gray-800/60 border border-gray-600/40 text-xs font-bold"
                    >
                      ğŸŒªï¸ ì–´ë ¤ì›€
                    </button>
                  </div>
                  <div className="bg-black/30 rounded-xl p-2 border border-gray-700/40 space-y-2">
                    <div className="flex items-center justify-between text-[11px] text-gray-400">
                      <span>ğŸŒ¬ï¸ ë°”ëŒ</span><span>{wind.toFixed(3)}</span>
                    </div>
                    <input type="range" min="-0.06" max="0.06" step="0.005" value={wind} onChange={(e)=>{ setWind(parseFloat(e.target.value)); if (Math.abs(parseFloat(e.target.value)) > 0.045) award('apollo-wind','ğŸŒ¬ï¸','ë°”ëŒ'); }} className="w-full"/>
                    <div className="flex items-center justify-between text-[11px] text-gray-400">
                      <span>ğŸ§² ì¤‘ë ¥</span><span>{gScale.toFixed(2)}</span>
                    </div>
                    <input type="range" min="0.7" max="1.4" step="0.05" value={gScale} onChange={(e)=>{ setGScale(parseFloat(e.target.value)); if (parseFloat(e.target.value) >= 1.3) award('apollo-gravity','ğŸ§²','ì¤‘ë ¥'); }} className="w-full"/>
                  </div>
                  <div className="relative flex-1 h-44 rounded-xl overflow-hidden border border-gray-700/40 bg-gradient-to-b from-black to-gray-900">
                    <div className="absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-r from-gray-700/40 to-gray-800/60" />
                    <div className="absolute bottom-6" style={{left:`${padX}%`, width:`${padW}%`, transform:'translateX(-50%)'}}>
                      <div className="h-2 bg-yellow-400/80 rounded-full shadow" />
                      <div className="text-[10px] text-yellow-200 text-center mt-1">ì°©ë¥™ì§€ì </div>
                    </div>
                    <div className="absolute" style={{left:`${x}%`, top:`${y}%`, transform:'translate(-50%,-50%)'}}>
                      <div className={`text-2xl ${thrust?'wiggle':''}`}>ğŸ›¬</div>
                      {thrust && fuel>0 && <div className="text-center text-sm -mt-1">ğŸ”¥</div>}
                    </div>
                    {status && (
                      <div className="absolute inset-0 flex items-center justify-center">
                        <div className="px-4 py-2 rounded-2xl bg-black/70 border border-gray-600/40 text-lg font-bold">
                          {status==='landed' ? 'ğŸ ì„±ê³µ!' : 'ğŸ’¥ ì‹¤íŒ¨!'}
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="grid grid-cols-3 gap-2">
                    <button
                      onPointerDown={()=>setLeft(true)}
                      onPointerUp={()=>setLeft(false)}
                      onPointerCancel={()=>setLeft(false)}
                      className="py-3 rounded-xl bg-gray-800/60 border border-gray-600/40 text-sm font-bold"
                    >
                      â¬…ï¸
                    </button>
                    <button
                      onPointerDown={()=>{ if (!status) { setThrust(true); sfx('click'); } }}
                      onPointerUp={()=>setThrust(false)}
                      onPointerCancel={()=>setThrust(false)}
                      className="py-3 rounded-xl bg-gradient-to-r from-orange-600 to-red-600 text-sm font-bold"
                    >
                      ğŸ”¥ ì¶”ì§„(ëˆ„ë¥´ê³ !)
                    </button>
                    <button
                      onPointerDown={()=>setRight(true)}
                      onPointerUp={()=>setRight(false)}
                      onPointerCancel={()=>setRight(false)}
                      className="py-3 rounded-xl bg-gray-800/60 border border-gray-600/40 text-sm font-bold"
                    >
                      â¡ï¸
                    </button>
                  </div>
                  <button onClick={reset} className="w-full py-2 rounded-xl bg-gray-900/60 border border-gray-700/40 text-xs">â†©ï¸ ë‹¤ì‹œ ì‹œì‘</button>
                  <p className="text-[11px] text-gray-400 text-center">íŒ: ì²œì²œíˆ ë‚´ë ¤ì˜¤ë©´ ğŸ ìŠ¤í‹°ì»¤!</p>
                </div>
              </div>
            ) : (
              <div className="flex-1 overflow-y-auto pr-1">
                <div className="grid grid-cols-2 gap-3">
                  {apolloCards.map(c=><Card key={c.id} card={c} onClick={()=>{ award(`apollo-card-${c.id}`,'ğŸš€','ì•„í´ë¡œ ì¹´ë“œ'); setModal(c); }}/>)}
                </div>
              </div>
            )}
          </div>
        );
      };

      const Artemis = () => {
        const currentInfo = rocket ? rocketInfos[rocket.id] : null;
        const launchInfo = launchTimeline[launchStage];
        const flightInfo = flightStories[flightStage];
        return (
          <div className="h-[calc(100vh-104px)] flex flex-col gap-3">
            <div className="space-y-2">
              <h2 className="text-xl font-bold text-center">ğŸŒ™ íƒ„í¬ì˜ ì•„ë¥´í…Œë¯¸ìŠ¤ 2í˜¸</h2>
              <div className="grid grid-cols-4 gap-2">
                {[
                  {id:'rocket',label:'ë¡œì¼“'},
                  {id:'launch',label:'ë°œì‚¬'},
                  {id:'flight',label:'ë¹„í–‰'},
                  {id:'nasa',label:'NASA'}
                ].map(t=>(
                  <button
                    key={t.id}
                    onClick={()=>setArtemisTab(t.id)}
                    className={`py-2 rounded-lg text-xs font-bold border ${artemisTab===t.id?'bg-gradient-to-r from-indigo-600 to-purple-600 border-indigo-400/50':'bg-gray-900/50 border-gray-700/50'}`}
                  >
                    {t.label}
                  </button>
                ))}
              </div>
              <p className="text-center text-xs text-gray-300">íƒ„í¬ì•¼, íƒ­ì„ ëˆŒëŸ¬ì„œ í•˜ë‚˜ì”©ë§Œ ë³´ì. ê·¸ëŸ¼ ìŠ¤í¬ë¡¤ì´ ê¸¸ì–´ì§€ì§€ ì•Šì•„!</p>
            </div>

            <div className="flex-1 overflow-y-auto pr-1 space-y-3">
              {artemisTab==='rocket' && (
                <>
                  {(() => {
                    // ë“œë˜ê·¸&ë“œë¡­ ì¡°ë¦½ í¼ì¦ (ìˆœì„œ ë§ì¶”ê¸°)
                    const correct = ['las','orion','icps','core','boost','eng'];
                    const labels = {
                      las:'íƒˆì¶œ', orion:'ì˜¤ë¦¬ì˜¨', icps:'2ë‹¨', core:'ì—°ë£Œ', boost:'ë¶€ìŠ¤í„°', eng:'ì—”ì§„'
                    };
                    const [order, setOrder] = useState(() => pick([
                      ['las','orion','icps','core','boost','eng'],
                      ['orion','las','icps','core','eng','boost'],
                      ['icps','orion','las','core','boost','eng'],
                      ['boost','core','icps','orion','las','eng'],
                      ['eng','boost','core','icps','orion','las']
                    ]).slice());
                    const [dragId, setDragId] = useState(null);
                    const isCorrect = order.join(',') === correct.join(',');
                    useEffect(() => { if (isCorrect) award('artemis-build','ğŸ§©','ì¡°ë¦½'); }, [isCorrect]);

                    const swap = (a, b) => {
                      const ia = order.indexOf(a);
                      const ib = order.indexOf(b);
                      if (ia < 0 || ib < 0) return;
                      const n = order.slice();
                      [n[ia], n[ib]] = [n[ib], n[ia]];
                      setOrder(n);
                      sfx('click');
                    };

                    return (
                      <div className="p-3 bg-gradient-to-br from-gray-900/40 to-indigo-950/20 border border-gray-700/40 rounded-2xl space-y-2">
                        <div className="flex items-center justify-between">
                          <h3 className="font-bold text-sm text-white">ğŸ§© ë¡œì¼“ ì¡°ë¦½ í¼ì¦</h3>
                          <button
                            onClick={() => { setOrder(pick([correct, [...correct].reverse(), ['orion','las','icps','core','eng','boost'], ['core','boost','eng','icps','orion','las']]).slice()); sfx('click'); showToast('ğŸ”€ ì„ê¸°'); }}
                            className="text-xs px-3 py-1 rounded-full bg-gray-800/70 border border-gray-700/50"
                          >
                            ğŸ”€ ì„ê¸°
                          </button>
                        </div>
                        <p className="text-[11px] text-gray-300">íƒ„í¬ì•¼, ìœ„â†’ì•„ë˜ ìˆœì„œë¡œ ë§ì¶°ë´! (ë“œë˜ê·¸í•´ì„œ ë°”ê¾¸ê¸°)</p>
                        <div className="grid grid-cols-3 gap-2">
                          {order.map(id=>(
                            <div
                              key={id}
                              draggable
                              onDragStart={()=>{ setDragId(id); sfx('click'); }}
                              onDragOver={(e)=>e.preventDefault()}
                              onDrop={()=>{ if (dragId && dragId !== id) swap(dragId, id); setDragId(null); }}
                              className={`p-2 rounded-xl text-xs font-bold text-center border bg-black/30 ${dragId===id?'ring-2 ring-yellow-400/50':''} ${isCorrect?'border-green-400/40':'border-gray-700/40'}`}
                            >
                              {labels[id]}
                            </div>
                          ))}
                        </div>
                        <div className="text-center text-sm font-bold">
                          {isCorrect ? 'âœ… ì™„ì„±! (ìŠ¤í‹°ì»¤!)' : 'ğŸ‘€ ì•„ì§!'}
                        </div>
                      </div>
                    );
                  })()}

                  <div className="flex gap-3">
                    <div className="w-1/3 bg-gray-900/50 rounded-xl p-2">
                      <p className="text-xs text-center mb-2 text-gray-400">ë¡œì¼“ì„ ëˆŒëŸ¬ë´!</p>
                      <div className="relative h-40 mx-auto w-10">
                        {rockets.map((p,i)=><button key={p.id} onClick={()=>setRocket(p)} className={`absolute w-full border border-gray-600 hover:scale-110 transition ${rocket?.id===p.id?'ring-2 ring-yellow-400':''}`} style={{top:p.top,height:p.h,backgroundColor:p.color,borderRadius:i===0?'50% 50% 0 0':'2px'}}/>)}
                      </div>
                    </div>
                    <div className="w-2/3">
                      {rocket?(
                        <div className="p-3 bg-gradient-to-br from-blue-900/50 to-purple-900/50 rounded-xl h-full">
                          <h3 className="font-bold text-sm text-yellow-300 mb-1">{rocket.name}</h3>
                          <p className="text-xs text-blue-100 leading-relaxed">{currentInfo?.structure}</p>
                        </div>
                      ):(
                        <div className="p-3 bg-gray-800/50 rounded-xl h-full text-xs text-gray-400">
                          <p className="font-bold mb-2">ğŸ‘ˆ ë¡œì¼“ì„ ëˆŒëŸ¬ë´!</p>
                          <p>ë†’ì´: 98m ì •ë„ì•¼!</p>
                          <p>ë¬´ê²Œ: 261ë§Œkgì´ë‚˜ ëœë‹¨ë‹¤.</p>
                          <p>ì†ë„: 39,500km/hê¹Œì§€ ë‹¬ë ¤!</p>
                        </div>
                      )}
                    </div>
                  </div>
                  <div className="space-y-2">
                    <h3 className="font-bold text-sm text-center">ğŸ—ºï¸ ë¯¸ì…˜ ìˆœì„œ</h3>
                    <div className="flex gap-1">{missions.map((s,i)=><button key={i} onClick={()=>setMission(i)} className={`flex-1 p-2 rounded-lg text-center ${mission===i?'bg-gradient-to-br from-blue-600 to-purple-600':'bg-gray-800/50'}`}><div className="text-lg">{s.emoji}</div><div className="text-xs">{i+1}</div></button>)}</div>
                    <div className="p-3 bg-indigo-900/30 rounded-xl"><h4 className="font-bold text-indigo-300 text-sm">{missions[mission].title}</h4><p className="text-xs mt-1">{missions[mission].desc}</p></div>
                  </div>
                  <div className="p-3 bg-gradient-to-r from-cyan-900/30 to-blue-900/30 rounded-xl">
                    <h3 className="font-bold text-cyan-300 text-sm mb-1">ğŸ‘¨â€ğŸš€ ìŠ¹ë¬´ì›</h3>
                    <div className="grid grid-cols-2 gap-1 text-xs"><div>ğŸ‡ºğŸ‡¸ Reid Wiseman</div><div>ğŸ‡ºğŸ‡¸ Victor Glover</div><div>ğŸ‡ºğŸ‡¸ Christina Koch</div><div>ğŸ‡¨ğŸ‡¦ Jeremy Hansen</div></div>
                  </div>
                </>
              )}

              {artemisTab==='launch' && (
                (() => {
                  const [hold, setHold] = useState(0);
                  const [armed, setArmed] = useState(false);
                  const [count, setCount] = useState(null);
                  const [rhythmMode, setRhythmMode] = useState(false);
                  const [pattern, setPattern] = useState('TTH'); // TTH / THT
                  const [step, setStep] = useState(0);
                  const [holdStart, setHoldStart] = useState(null);
                  const holding = armed && count === null;

                  useEffect(() => {
                    if (!holding) return;
                    const t = setInterval(() => setHold(h => clamp(h + 2.8, 0, 100)), 16);
                    return () => clearInterval(t);
                  }, [holding]);

                  useEffect(() => {
                    if (hold < 100 || count !== null) return;
                    setCount(3);
                    sfx('boom');
                    setShakeScreen(true);
                    setTimeout(()=>setShakeScreen(false), 450);
                  }, [hold, count]);

                  useEffect(() => {
                    if (count === null) return;
                    if (count === 0) {
                      award('artemis-launch', 'ğŸ”¥', 'ë°œì‚¬!');
                      showToast('ğŸš€ ë°œì‚¬!');
                      setShakeScreen(true);
                      setTimeout(()=>setShakeScreen(false), 600);
                      setHold(0);
                      setArmed(false);
                      setCount(null);
                      return;
                    }
                    const t = setTimeout(() => setCount(c => c - 1), 650);
                    return () => clearTimeout(t);
                  }, [count]);

                  const seq = pattern === 'TTH' ? ['T','T','H'] : ['T','H','T'];
                  const resetRhythm = () => { setStep(0); setHoldStart(null); };
                  const successRhythm = () => { award('artemis-rhythm','ğŸµ','ë¦¬ë“¬'); showToast('ğŸµ ë¦¬ë“¬ ì„±ê³µ!'); sfx('win'); };
                  const failRhythm = () => { showToast('ğŸ˜µ ë‹¤ì‹œ!'); sfx('boom'); resetRhythm(); };

                  const onTap = () => {
                    if (!rhythmMode) return;
                    sfx('click');
                    if (seq[step] !== 'T') return failRhythm();
                    const next = step + 1;
                    setStep(next);
                    if (next >= seq.length) { successRhythm(); resetRhythm(); }
                  };
                  const onHoldDown = () => {
                    if (!rhythmMode) return;
                    setHoldStart(Date.now());
                    sfx('click');
                  };
                  const onHoldUp = () => {
                    if (!rhythmMode || holdStart === null) return;
                    const ms = Date.now() - holdStart;
                    setHoldStart(null);
                    if (seq[step] !== 'H') return failRhythm();
                    if (ms < 550) return failRhythm();
                    const next = step + 1;
                    setStep(next);
                    if (next >= seq.length) { successRhythm(); resetRhythm(); }
                  };

                  return (
                    <div className="space-y-3">
                      <div className="p-3 bg-gradient-to-br from-indigo-900/30 to-purple-900/25 rounded-2xl border border-indigo-500/15 space-y-2">
                        <div className="flex items-center justify-between">
                          <h3 className="font-bold text-sm text-indigo-200">ğŸµ ë¦¬ë“¬ ì²´í¬(íƒ­/í™€ë“œ)</h3>
                          <button
                            onClick={()=>{ setRhythmMode(v=>!v); resetRhythm(); sfx('click'); showToast('ğŸµ ë¦¬ë“¬'); }}
                            className={`text-xs px-3 py-1 rounded-full border ${rhythmMode?'bg-indigo-600/25 border-indigo-400/30':'bg-gray-900/40 border-gray-700/40'}`}
                          >
                            {rhythmMode ? 'ON' : 'OFF'}
                          </button>
                        </div>
                        <div className="grid grid-cols-2 gap-2">
                          <button onClick={()=>{ setPattern('TTH'); resetRhythm(); sfx('click'); }} className={`py-2 rounded-xl text-xs font-bold border ${pattern==='TTH'?'bg-indigo-600/25 border-indigo-400/30':'bg-gray-900/40 border-gray-700/40'}`}>ğŸ‘†ğŸ‘†âœ‹</button>
                          <button onClick={()=>{ setPattern('THT'); resetRhythm(); sfx('click'); }} className={`py-2 rounded-xl text-xs font-bold border ${pattern==='THT'?'bg-indigo-600/25 border-indigo-400/30':'bg-gray-900/40 border-gray-700/40'}`}>ğŸ‘†âœ‹ğŸ‘†</button>
                        </div>
                        {rhythmMode && (
                          <div className="bg-black/30 rounded-xl p-3 border border-gray-700/40 space-y-2">
                            <p className="text-xs text-gray-200">ë‹¤ìŒ: <span className="font-bold">{seq[step] === 'T' ? 'ğŸ‘† íƒ­' : 'âœ‹ í™€ë“œ(0.6ì´ˆ)'}</span></p>
                            <div className="flex gap-2">
                              <button onClick={onTap} className="flex-1 py-3 rounded-xl bg-gray-800/60 border border-gray-600/40 font-bold">ğŸ‘† íƒ­</button>
                              <button
                                onPointerDown={onHoldDown}
                                onPointerUp={onHoldUp}
                                onPointerCancel={()=>setHoldStart(null)}
                                className={`flex-1 py-3 rounded-xl bg-gray-800/60 border border-gray-600/40 font-bold ${holdStart?'wiggle':''}`}
                              >
                                âœ‹ í™€ë“œ
                              </button>
                            </div>
                            <div className="text-[11px] text-gray-400 text-center">ì„±ê³µí•˜ë©´ ğŸµ ìŠ¤í‹°ì»¤!</div>
                          </div>
                        )}
                      </div>
                      <div className="p-3 bg-gradient-to-br from-red-900/35 to-orange-900/25 rounded-2xl border border-red-500/15">
                        <div className="flex items-center justify-between">
                          <h3 className="font-bold text-sm text-red-200">ğŸ”´ BIG RED ë²„íŠ¼</h3>
                          <button
                            onClick={()=>{ setArmed(a=>!a); setHold(0); setCount(null); sfx('click'); showToast('âœ… ì¤€ë¹„/í•´ì œ'); }}
                            className={`px-3 py-1 rounded-full text-xs border ${armed?'bg-red-600/30 border-red-400/30':'bg-gray-900/40 border-gray-700/40'}`}
                          >
                            {armed ? 'ì¤€ë¹„ë¨' : 'ì¤€ë¹„'}
                          </button>
                        </div>
                        <p className="text-xs text-gray-200 mt-2">íƒ„í¬ì•¼, ì¤€ë¹„ë¥¼ ì¼  ë‹¤ìŒ ë²„íŠ¼ì„ ê¾¹ ëˆ„ë¥´ë©´â€¦ ğŸš€</p>
                        <div className="mt-3">
                          <button
                            disabled={!armed || count !== null}
                            onPointerDown={()=>{ if (!armed) return; setHold(0); sfx('click'); setArmed(true); }}
                            onPointerUp={()=>setHold(0)}
                            onPointerCancel={()=>setHold(0)}
                            onPointerMove={()=>{}}
                            onPointerLeave={()=>setHold(0)}
                            className={`w-full py-4 rounded-2xl font-black text-lg border ${armed?'bg-gradient-to-r from-red-600 to-orange-500 border-red-300/40':'bg-gray-800/40 border-gray-700/40'} ${armed?'wiggle':''}`}
                          >
                            {count !== null ? `ğŸš€ ${count}` : 'ğŸ”¥ ê¾¹ ëˆŒëŸ¬ì„œ ë°œì‚¬!'}
                          </button>
                          <div className="mt-2 h-3 bg-black/40 rounded-full overflow-hidden border border-gray-700/40">
                            <div className="h-full bg-gradient-to-r from-red-500 to-yellow-400" style={{width:`${hold}%`}}/>
                          </div>
                          <p className="text-[11px] text-gray-400 text-center mt-2">ë¡±í”„ë ˆìŠ¤(ëˆ„ë¥´ê³  ìˆê¸°) ì¸í„°ë™ì…˜</p>
                        </div>
                      </div>

                      <div className="p-3 bg-gradient-to-br from-amber-900/30 to-red-900/30 rounded-xl border border-amber-500/10">
                        <div className="flex items-center justify-between">
                          <h3 className="font-bold text-sm text-amber-200">ğŸ”¥ ë°œì‚¬ ë‹¨ê³„</h3>
                          <div className="text-2xl">{launchInfo.icon}</div>
                        </div>
                        <p className="text-base font-bold text-white mt-2">{launchInfo.title}</p>
                        <p className="text-xs text-gray-200 leading-relaxed mt-1">{launchInfo.desc}</p>
                        <div className="flex gap-2 mt-3">
                          <button onClick={()=>{ setLaunchStage(s=>Math.max(0,s-1)); award('artemis-step','ğŸ§©','ë‹¨ê³„'); }} className="flex-1 px-3 py-2 text-xs rounded-lg bg-gray-800/60 border border-gray-600/40" disabled={launchStage===0}>ì´ì „</button>
                          <button onClick={()=>{ setLaunchStage(s=>s===launchTimeline.length-1?0:s+1); award('artemis-step','ğŸ§©','ë‹¨ê³„'); }} className="flex-1 px-3 py-2 text-xs rounded-lg bg-gradient-to-r from-orange-600 to-pink-600 font-bold">
                            {launchStage===launchTimeline.length-1?'ë‹¤ì‹œ ì‹œì‘':'ë‹¤ìŒ ë‹¨ê³„'}
                          </button>
                        </div>
                      </div>
                    </div>
                  );
                })()
              )}

              {artemisTab==='flight' && (
                <div className="p-3 bg-gradient-to-br from-blue-900/30 to-indigo-900/30 rounded-xl border border-blue-500/10 space-y-2">
                  <h3 className="font-bold text-sm text-blue-200 text-center">ğŸ›°ï¸ ìš°ì£¼ ë¹„í–‰ ì´ì•¼ê¸°</h3>
                  <div className="flex justify-center gap-1">{flightStories.map((_,i)=><button key={i} onClick={()=>setFlightStage(i)} className={`w-7 h-7 rounded-full text-xs font-bold ${flightStage===i?'bg-gradient-to-br from-blue-500 to-purple-500':'bg-gray-800/50'}`}>{i+1}</button>)}</div>
                  <div className="bg-black/30 rounded-xl p-3 text-xs">
                    <p className="text-sm font-bold text-white">{flightInfo.title}</p>
                    <p className="text-gray-200 mt-1 leading-relaxed">{flightInfo.desc}</p>
                  </div>
                </div>
              )}

              {artemisTab==='nasa' && (
                <div className="space-y-3">
                  <p className="text-xs text-gray-300 text-center">NASA ê³µì‹ ìë£ŒëŠ” ì¹´ë“œë¡œ ëª¨ì•„ë’€ì–´. ëˆŒëŸ¬ì„œ ëª¨ë‹¬ë¡œ ë³´ì!</p>
                  <div className="grid grid-cols-2 gap-3">
                    {nasaLearnCards.map(c=>(
                      <Card key={c.id} card={c} onClick={()=>setModal(c)}/>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      };

      const Quiz = () => {
        const handleAns = i => { if(!showAns){setShowAns(true);if(i===quizzes[qNum].a)setQuizScore(s=>s+1);} };
        const next = () => { setShowAns(false); setQNum(n=>n+1); };
        const reset = () => { setQNum(0); setQuizScore(0); setShowAns(false); };
        return (
          <div className="space-y-4">
            <h2 className="text-xl font-bold text-center">ğŸ® íƒ„í¬ì™€ ë‹¬ í€´ì¦ˆ!</h2>
            <div className="text-center">
              <p className="text-xs text-gray-400 mb-1">íƒ„í¬ì˜ ì ìˆ˜</p>
              <span className="text-2xl font-bold text-yellow-400">{quizScore}</span>
              <span className="text-gray-400">/{quizzes.length}</span>
            </div>
            {qNum<quizzes.length?(
              <div className="p-4 bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-xl">
                <p className="text-xs text-gray-400 mb-2">íƒ„í¬ì•¼, ë¬¸ì œ {qNum+1}/{quizzes.length}</p>
                <h3 className="font-bold mb-3">{quizzes[qNum].q}</h3>
                <div className="space-y-2">{quizzes[qNum].o.map((o,i)=><button key={i} onClick={()=>handleAns(i)} disabled={showAns} className={`w-full p-2 rounded-lg text-left text-sm ${showAns?(i===quizzes[qNum].a?'bg-green-600':'bg-gray-700/50'):'bg-gray-800/50 hover:bg-gray-700'}`}>{i+1}. {o}</button>)}</div>
                {showAns&&<button onClick={next} className="mt-3 w-full p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-sm">ë‹¤ìŒ ì´ì•¼ê¸° â†’</button>}
              </div>
            ):(
              <div className="p-6 bg-gradient-to-br from-yellow-900/50 to-orange-900/50 rounded-xl text-center">
                <div className="text-4xl mb-2">ğŸ‰</div>
                <h3 className="text-xl font-bold mb-2">íƒ„í¬ì•¼, íƒí—˜ ì™„ë£Œ!</h3>
                <p className="text-lg">{quizScore===quizzes.length?'ì™„ë²½í•´, íƒ„í¬ì•¼! ğŸŒŸ':quizScore>=3?'ì •ë§ ì˜í–ˆì–´! ğŸ‘':'ë‹¤ì‹œ í•œë²ˆ ê°€ë³¼ê¹Œ? ğŸ’ª'}</p>
                <button onClick={reset} className="mt-4 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg font-bold">ë‹¤ì‹œ í’€ì–´ë³¼ê¹Œ?</button>
              </div>
            )}
          </div>
        );
      };

      // (êµ¬ì„± ìœ ì§€) ë³„ë„ ê°¤ëŸ¬ë¦¬/ìŠ¤í‹°ì»¤ ì„¹ì…˜ì€ ì œê±°í–ˆì–´.

      const nav = [
        {id:'moon',n:'ğŸŒ™'},
        {id:'history',n:'ğŸ“œ'},
        {id:'apollo',n:'ğŸš€'},
        {id:'artemis',n:'ğŸ›°ï¸'}
      ];

      return (
        <div className={`min-h-screen bg-gradient-to-b from-gray-900 via-indigo-950 to-black text-white relative overflow-hidden ${shakeScreen?'shake':''}`}>
          {stars.map(s=><div key={s.id} className="absolute rounded-full bg-white animate-pulse" style={{left:`${s.l}%`,top:`${s.t}%`,width:`${s.s}px`,height:`${s.s}px`,animationDelay:`${s.d}s`,opacity:0.6}}/>)}
          <nav className="fixed top-0 left-0 right-0 bg-gray-900/95 border-b border-gray-700 z-20">
            <div className="max-w-md mx-auto flex items-center justify-between py-2 px-2">
              <div className="flex gap-2">
                {nav.map(n=><button key={n.id} onClick={()=>{sfx('click'); setSection(n.id);}} className={`p-2 text-xl ${section===n.id?'scale-125':''}`}>{n.n}</button>)}
              </div>
              <div className="flex items-center gap-2">
                <button onClick={()=>{setSoundOn(v=>!v); showToast(soundOn?'ğŸ”‡':'ğŸ”Š');}} className="px-3 py-1 rounded-full text-xs bg-gray-800/70 border border-gray-700/50">
                  {soundOn?'ğŸ”Š':'ğŸ”‡'}
                </button>
                <button onClick={()=>{
                  const pool = section === 'moon' ? earthCards
                    : section === 'history' ? historyCards
                    : section === 'apollo' ? apolloCards
                    : nasaLearnCards;
                  sfx('click');
                  showToast('ğŸ² ëœë¤!');
                  setModal(pick(pool));
                }} className="px-3 py-1 rounded-full text-xs bg-gray-800/70 border border-gray-700/50">
                  ğŸ²
                </button>
              </div>
            </div>
          </nav>
          <div className="relative z-10 max-w-md mx-auto p-4 pt-20">
            {section==='moon'&&<MoonBasics/>}
            {section==='history'&&<MoonHistory/>}
            {section==='apollo'&&<Apollo/>}
            {section==='artemis'&&<Artemis/>}
          </div>
          {modal&&<Modal card={modal} onClose={()=>setModal(null)}/>}
          {toast && (
            <div className="fixed bottom-4 left-0 right-0 z-30 flex justify-center pointer-events-none">
              <div className="spark px-4 py-2 rounded-full bg-black/70 border border-gray-600/40 text-sm">
                {toast}
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<MoonExplorer />);
  </script>
</body>
</html>
